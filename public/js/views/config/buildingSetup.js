(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{195:function(t,e,o){var r=o(278);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(8)(r,n);r.locals&&(t.exports=r.locals)},277:function(t,e,o){"use strict";o(195)},278:function(t,e,o){(t.exports=o(7)(!1)).push([t.i,"#add-btn[data-v-7f47b67e],#floor-list[data-v-7f47b67e]{margin-top:24px}#floor-entry[data-v-7f47b67e]{width:400px;max-width:100%}.floor[data-v-7f47b67e]{position:relative;display:inline-block;flex-direction:column;font-size:20px;padding:10px;border-radius:10px;margin-right:10px;transition:background-color .24s linear}.floor .floor-thumb[data-v-7f47b67e]{position:relative;width:200px;height:135px;overflow:hidden}.floor .floor-thumb .fp-upload-progress[data-v-7f47b67e]{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;flex-direction:column;justify-content:center;align-items:center;font-size:14px;background-color:rgba(57,57,57,.8);z-index:1}.floor .floor-thumb .fp-upload-trigger[data-v-7f47b67e]{display:flex;justify-content:center;align-items:center;height:calc(100% - 2px);font-size:14px;cursor:pointer;border:1px dashed rgba(var(--app-text-rgb),.1);border-radius:8px}.floor .floor-thumb .fp-thumb[data-v-7f47b67e]{position:relative;height:135px;display:flex;justify-content:center;align-items:center;background-color:#fff;border-radius:8px}.floor .floor-thumb .fp-thumb img[data-v-7f47b67e]{display:block;height:auto;max-width:100%;margin:0 auto;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.floor .floor-thumb .fp-thumb .fp-thumb-opts[data-v-7f47b67e]{position:absolute;left:0;bottom:0;right:0;padding:2px 6px 6px;color:#fff;background-color:rgba(57,57,57,.8);transform:translateY(100%);transition:transform .24s}.floor .floor-thumb .fp-thumb .fp-thumb-opts a[data-v-7f47b67e]{display:inline-block;font-size:14px;cursor:pointer}.floor .floor-thumb .fp-thumb .fp-thumb-opts a+a[data-v-7f47b67e]{margin-left:4px}.floor .floor-thumb .fp-thumb .fp-thumb-opts a[data-v-7f47b67e]:hover{text-decoration:underline}.floor .floor-thumb .fp-thumb:hover .fp-thumb-opts[data-v-7f47b67e]{transform:translateY(0)}.floor .floor-info[data-v-7f47b67e]{flex:1 auto;padding:10px}.floor .floor-info .floor-number[data-v-7f47b67e]{display:inline-block;cursor:pointer;color:inherit;margin-bottom:8px;transition:color .2s linear}.floor .floor-info .floor-number[data-v-7f47b67e]:hover{color:#ed762c}.floor .floor-opts[data-v-7f47b67e]{line-height:13px}.floor .floor-opts .floor-opt[data-v-7f47b67e]{font-size:13px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.floor .floor-opts .floor-opt+.floor-opt[data-v-7f47b67e]{margin-left:4px}.floor .floor-opts .floor-opt[data-v-7f47b67e]:hover{text-decoration:underline}.floor[data-v-7f47b67e]:hover{background-color:rgba(var(--app-text-rgb),.04)}.floor.selected[data-v-7f47b67e]{background-color:rgba(var(--app-text-rgb),.1)}.floor.selected .floor-info .floor-number[data-v-7f47b67e]{color:#ed762c}.fp-preview[data-v-7f47b67e]{position:fixed;top:0;left:0;right:0;bottom:0;background-color:rgba(20,20,20,.85)}.fp-preview .preview-header[data-v-7f47b67e]{position:relative;font-size:18px;padding:10px;line-height:24px;color:#fff;background-color:rgba(20,20,20,.7);z-index:1}.fp-preview .preview-header .preview-close[data-v-7f47b67e]{float:right;cursor:pointer;font-size:14px;padding:0 8px}.fp-preview img[data-v-7f47b67e]{position:absolute;top:50%;left:50%;max-height:90%;max-width:90%;transform:translate(-50%,-50%);background-color:#fff;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:-1}#area-entry[data-v-7f47b67e]{width:300px;max-width:100%}#area-list[data-v-7f47b67e]{position:absolute;top:36px;right:32px;bottom:36px;width:350px;max-width:100%;display:flex;flex-direction:column;padding:16px;border-radius:10px;background-color:var(--app-background-color);border:1px solid var(--app-box-border);overflow:hidden}#area-list ul[data-v-7f47b67e]{padding:0;margin:12px 0;list-style:none;overflow:auto}#area-list ul li[data-v-7f47b67e]{padding:4px}#area-list .area-info[data-v-7f47b67e]{display:flex;padding:8px;border-radius:8px;background-color:transparent;transition:background-color .2s linear}#area-list .area-info[data-v-7f47b67e]:hover{background-color:hsla(0,0%,100%,.05)}#area-list .area-info .area-name[data-v-7f47b67e]{flex:1 auto}#area-list .area-info .area-opt[data-v-7f47b67e]{display:inline-block;font-size:13px;cursor:pointer}",""])},440:function(t,e,o){"use strict";o.r(e);var r=o(1),n=o.n(r),a=o(6),i=o(5),s=o(0);function l(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function u(t,e,o,r,n,a,i){try{var s=t[a](i),l=s.value}catch(t){return void o(t)}s.done?e(l):Promise.resolve(l).then(r,n)}function c(t){return function(){var e=this,o=arguments;return new Promise((function(r,n){var a=t.apply(e,o);function i(t){u(a,r,n,i,s,"next",t)}function s(t){u(a,r,n,i,s,"throw",t)}i(void 0)}))}}function p(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function f(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach((function(e){g(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function g(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var v="/api/floors",_="/api/areas",m={title:"Building Setup",props:["bldg_id","bldg_name"],components:{CircleProgress:i.b,Loader:i.f,Modal:i.h},data:function(){return{floor:null,listTransition:"fadeUp",loaded:!1,showEntry:!1,editMode:!1,entry:{id:null,fNo:1,size_sqm:0,size_sqft:0,occupancy_limit:0},areaModal:!1,areaTypes:[],areaEntry:{id:null,group_id:"",type:"",limit:0,sensor_count:0},showPlan:!1,planUrl:null,state:{saving:!1,imgLoaded:!1}}},computed:f(f(f({},Object(a.d)({user:function(t){return t.user.info},company_id:function(t){return t.locations.client},buildings:function(t){return t.locations.buildings},building:function(t){return t.locations.building}})),Object(a.b)({api_header:"backend/api_header",api_buildings:"backend/api_buildings",api_building_overview:"backend/api_building_overview",api_floors:"backend/api_floors",api_floor:"backend/api_floor",api_areas:"backend/api_areas",api_area:"backend/api_area"})),{},{floors:function(){var t,e=this;return null===(t=this.buildings.find((function(t){return t.id==e.bldg_id})))||void 0===t?void 0:t.floors},baseUrl:function(){return Object(s.g)()},floorList:function(){return this.floors.sort((function(t,e){return t.number>e.number?1:t.number<e.number?-1:0}))},areaList:function(){return null==this.floor?[]:this.floor.areas.sort((function(t,e){return t.name>e.name?1:t.name<e.name?-1:0}))},areaByDesk:function(){return"Workspace Desk Area"===this.areaEntry.type}}),methods:f(f({},Object(a.c)({setBuildings:"locations/setBuildings",setBuilding:"locations/setBuilding",setFloors:"locations/setFloors"})),{},{getBuilding:function(t,e){var o=this;return c(n.a.mark((function e(){var r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,!(o.buildings.length>0)){e.next=5;break}r=o.buildings.find((function(e){return e.id==t})),e.next=10;break;case 5:return e.next=7,axios.get(o.api_buildings(o.company_id),o.api_header());case 7:a=e.sent,r=a.data.find((function(e){return e.id==t})),o.setBuildings(a.data);case 10:o.setBuilding(r);case 11:case"end":return e.stop()}}),e)})))()},getFloors:function(){var t=this;return c(n.a.mark((function e(){var o,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.all([axios.get(v,{params:{bid:t.bldg_id}}),axios.get(t.api_building_overview(t.company_id,t.bldg_id),t.api_header())]);case 2:o=e.sent,r=o[0].data,(a=l(o[1].data.children||[])).forEach((function(e){var o=r.find((function(t){return t.ref_id==e.id}));e.ordinal_no=Object(s.y)(e.number),e.occupancy_limit=null==o?void 0:o.occupancy_limit,e.floor_plan=null==o?void 0:o.floor_plan,e.floor_plan_url=null!=o&&o.floor_plan?"".concat(t.baseUrl,"/plans/").concat(o.floor_plan):null,e.upload_info={uploading:!1,progress:0},e.areas=e.children,delete e.children})),t.setFloors({bid:t.bldg_id,floors:a}),t.loaded=!0;case 7:case"end":return e.stop()}}),e)})))()},toggleEntry:function(t){var e=this;this.showEntry=t,t&&setTimeout((function(){e.$refs.fNo.focus()}),0)},toggleSaving:function(t){this.state.saving=t},sqmKeyup:function(){this.entry.size_sqft=(this.entry.size_sqm/.092903).toFixed(2)},sqftKeyup:function(){this.entry.size_sqm=(.092903*this.entry.size_sqft).toFixed(2)},triggerAdd:function(){this.entry.id=null,this.entry.fNo=this.floors.length>0?Math.max.apply(Math,l(this.floors.map((function(t){return t.number}))))+1:1,this.entry.size_sqm=0,this.entry.size_sqft=0,this.entry.occupancy_limit=0,this.editMode=!1,this.toggleEntry(!0)},addFloor:function(){var t=this;return c(n.a.mark((function e(){var o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.toggleSaving(!0),o={number:t.entry.fNo,size_sqm:t.entry.size_sqm,size_sqft:t.entry.size_sqft,building:t.building.name},e.next=4,axios.post(t.api_floors(t.company_id,t.bldg_id),o,t.api_header());case 4:200==(r=e.sent).status?(o.id=r.data.child_id,o.ordinal_no=Object(s.y)(o.number),axios.post(v,{building_id:t.bldg_id,ref_id:o.id,occupancy_limit:t.entry.occupancy_limit}).then((function(e){t.toggleSaving(!1),e.data.r&&(o.occupancy_limit=t.entry.occupancy_limit,o.upload_info={uploading:!1,progress:0},o.floor_plan=null,o.floor_plan_url=null,o.areas=[],t.building.floors.push(o),t.toggleEntry(!1))}))):t.toggleSaving(!1);case 6:case"end":return e.stop()}}),e)})))()},triggerEdit:function(t){var e=this.floors.find((function(e){return e.id===t}));this.entry.id=t,this.entry.fNo=e.number,this.entry.size_sqm=e.size_sqm,this.entry.size_sqft=e.size_sqft,this.entry.occupancy_limit=e.occupancy_limit,this.editMode=!0,this.toggleEntry(!0)},upFloor:function(){var t=this;return c(n.a.mark((function e(){var o,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.toggleSaving(!0),o={number:t.entry.fNo,size_sqm:t.entry.size_sqm,size_sqft:t.entry.size_sqft,building:t.building.name},r=t.entry.id,e.next=5,axios.put(t.api_floor(t.company_id,t.bldg_id,r),o,t.api_header());case 5:200==e.sent.status?((a=t.floors.find((function(t){return t.id===r}))).number=o.number,a.ordinal_no=Object(s.y)(o.number),a.size_sqm=o.size_sqm,a.size_sqft=o.size_sqft,a.building=o.building,a.occupancy_limit=t.entry.occupancy_limit,axios.put("".concat(v,"/").concat(r),{bid:t.bldg_id,occupancy_limit:t.entry.occupancy_limit}).then((function(e){t.toggleSaving(!1),e.data.r&&(t.setFloors({bid:t.bldg_id,floors:t.floors}),t.toggleEntry(!1))}))):t.toggleSaving(!1);case 7:case"end":return e.stop()}}),e)})))()},delFloor:function(t){var e=this;return c(n.a.mark((function o(){var r,a;return n.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=(r=e).floors.findIndex((function(e){return e.id===t})),r.$duDialog(null,"Remove <strong>".concat(r.floors[a].ordinal_no," Floor</strong>?"),{buttons:r.$duDialog.OK_CANCEL,okText:"Remove",callbacks:{okClick:function(e){this.hide(),r.toggleSaving(!0),axios.delete(r.api_floor(r.company_id,r.bldg_id,t),r.api_header).then((function(e){200==e.status?(r.toggleSaving(!1),r.floors.splice(a,1),axios.delete("".concat(v,"/").concat(t))):r.toggleSaving(!0)}))}}});case 2:case"end":return o.stop()}}),o)})))()},upFloorPlan:function(t){this.entry.id=t,this.$refs.fpFile.click()},fpFileChange:function(){var t=this,e=t.$refs.fpFile.files[0];if(e){var o=t.floors.find((function(e){return e.id===t.entry.id}));o.upload_info.uploading=!0,t.upload(e,(function(e,r){o.upload_info.uploading=!1,e?r.r&&(o.floor_plan=r.floor_plan,o.floor_plan_url="".concat(t.baseUrl,"/plans/").concat(o.floor_plan),t.setFloors({bid:t.bldg_id,floors:t.floors})):console.error(r)}))}},upload:function(t,e){var o=this;return c(n.a.mark((function r(){var a,i;return n.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a=new window.FormData,i=o.floors.find((function(t){return t.id===o.entry.id})),a.append("floor_plan",t),a.append("id",o.entry.id),a.append("bid",o.bldg_id),a.append("occupancy_limit",o.entry.occupancy_limit),axios.post("".concat(v,"/plan"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var e=Math.round(100*t.loaded/t.total);i.upload_info.progress=e}}).then((function(t){return e(!0,t.data)})).catch((function(t){return e(!1,t)}));case 6:case"end":return r.stop()}}),r)})))()},togglePlan:function(t){this.showPlan=t,this.listTransition="fade"},viewFloorPlan:function(t,e){var o=this;o.floor=o.floors.find((function(e){return e.id===t})),o.togglePlan(!0),o.state.imgLoaded=!1,Object(s.r)(o.floor.floor_plan_url,(function(){o.state.imgLoaded=!0}))},selectFloor:function(t){this.floor=t},deSelectFloor:function(t){["mousedown","touchend"].indexOf(t.type)>=0?t.target.closest("#floor-list .floor, .fp-preview, #area-list, #area-modal")||(this.floor=null):"keydown"===t.type&&27===t.keyCode&&(this.floor=null)},toMapper:function(t){this.$parent.$router.push({name:"mapper",query:{fid:t},params:{bid:this.bldg_id,bldg_name:this.bldg_name}})},getAreaTypes:function(){var t=this;return c(n.a.mark((function e(){var o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("".concat(_,"/types"));case 2:o=e.sent,r=o.data,t.areaTypes=r;case 5:case"end":return e.stop()}}),e)})))()},toggleAreaModal:function(t){var e=this;this.areaModal=t,t&&setTimeout((function(){e.$refs.group_id.focus()}),0)},newArea:function(){this.areaEntry.id=null,this.areaEntry.group_id="",this.areaEntry.limit=0,this.areaEntry.sensor_count=0,this.editMode=!1,this.toggleAreaModal(!0)},addArea:function(){var t=this;return c(n.a.mark((function e(){var o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.toggleSaving(!0),o={group_id:t.areaEntry.group_id,type:t.areaEntry.type,limit:t.areaEntry.limit,sensor_count:t.areaEntry.sensor_count},e.next=4,axios.post(t.api_areas(t.company_id,t.bldg_id,t.floor.id),o,t.api_header());case 4:200==(r=e.sent).status?(o.id=r.data.child_id,t.floor.areas.push(o),t.toggleSaving(!1),t.toggleAreaModal(!1)):t.toggleSaving(!1);case 6:case"end":return e.stop()}}),e)})))()},editArea:function(t){var e=this.floor.areas.find((function(e){return e.id==t}));this.areaEntry.id=t,this.areaEntry.group_id=e.group_id,this.areaEntry.type=e.type,this.areaEntry.limit=e.limit,this.areaEntry.sensor_count=e.sensor_count,this.editMode=!0,this.toggleAreaModal(!0)},updateArea:function(){var t=this;return c(n.a.mark((function e(){var o,r,a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.toggleSaving(!0),o={group_id:t.areaEntry.group_id,type:t.areaEntry.type,limit:t.areaEntry.limit,sensor_count:t.areaEntry.sensor_count},r=t.areaEntry.id,e.next=5,axios.put(t.api_area(t.company_id,t.bldg_id,t.floor.id,r),o,t.api_header());case 5:200==e.sent.status?((a=t.floor.areas.find((function(t){return t.id==r}))).group_id=o.group_id,a.type=o.type,a.limit=o.limit,a.sensor_count=o.sensor_count,t.toggleSaving(!1),t.toggleAreaModal(!1)):t.toggleSaving(!1);case 7:case"end":return e.stop()}}),e)})))()},delArea:function(t){var e=this;return c(n.a.mark((function o(){var r,a;return n.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:a=(r=e).floor.areas.findIndex((function(e){return e.id===t})),r.$duDialog(null,"Remove <strong>".concat(r.floor.areas.group_id,"</strong>?"),{buttons:r.$duDialog.OK_CANCEL,okText:"Remove",callbacks:{okClick:function(e){this.hide(),r.toggleSaving(!0),axios.delete(r.api_area(r.company_id,r.bldg_id,r.floor.id,t),r.api_header).then((function(t){200==t.status?(r.floor.areas.splice(a,1),r.toggleSaving(!1)):r.toggleSaving(!0)}))}}});case 2:case"end":return o.stop()}}),o)})))()}}),created:function(){var t=this;return c(n.a.mark((function e(){var o,r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.building,r=t.floors,!o||o.id!==t.bldg_id){e.next=10;break}if(!(r&&r.length>0)){e.next=6;break}t.loaded=!0,e.next=8;break;case 6:return e.next=8,t.getFloors();case 8:e.next=14;break;case 10:return e.next=12,t.getBuilding(t.bldg_id);case 12:return e.next=14,t.getFloors();case 14:return e.next=16,t.getAreaTypes();case 16:case"end":return e.stop()}}),e)})))()},mounted:function(){Object(s.a)(document,["mousedown","touchend","keydown"],this.deSelectFloor)},destroyed:function(){Object(s.s)(document,["mousedown","touchend","keydown"],this.deSelectFloor)}},b=(o(277),o(4)),y=Object(b.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"content"},[t.loaded?[o("h1",[t._v(t._s(t.building?t.building.name:""))]),t._v(" "),o("transition",{attrs:{name:"fadeUp",appear:""}},[t.loaded?o("div",{attrs:{id:"list-wrapper"}},[o("div",{attrs:{id:"floor-list"}},[0===t.floorList.length?o("div",[t._v("No floors defined")]):t._l(t.floorList,(function(e){return o("div",{key:e.id,staticClass:"floor",class:{selected:null!==t.floor&&t.floor.id==e.id}},[o("div",{staticClass:"floor-thumb"},[e.upload_info.uploading?o("div",{staticClass:"fp-upload-progress"},[t._v("\n                                Uploading\n                                "),o("circle-progress",{attrs:{percent:e.upload_info.progress}})],1):t._e(),t._v(" "),e.floor_plan?o("div",{staticClass:"fp-thumb"},[o("img",{attrs:{src:t.baseUrl+"/plans/thumbnail/"+e.floor_plan}}),t._v(" "),o("div",{staticClass:"fp-thumb-opts"},[o("a",{on:{click:function(o){return t.upFloorPlan(e.id)}}},[t._v("Change")]),t._v(" "),o("a",{on:{click:function(o){return t.viewFloorPlan(e.id,e.floor_plan)}}},[t._v("Preview")])])]):o("div",{staticClass:"fp-upload-trigger",on:{click:function(o){return t.upFloorPlan(e.id)}}},[t._v("\n                                Upload Floor Plan\n                            ")])]),t._v(" "),o("div",{staticClass:"floor-info"},[o("span",{staticClass:"floor-number",on:{click:function(o){return t.selectFloor(e)}}},[t._v(t._s(e.ordinal_no+" Floor"))]),t._v(" "),o("div",{staticClass:"floor-opts"},[e.floor_plan?[o("a",{staticClass:"floor-opt",on:{click:function(o){return t.toMapper(e.id)}}},[t._v("Mapper")])]:t._e(),t._v(" "),o("a",{staticClass:"floor-opt",on:{click:function(o){return t.triggerEdit(e.id)}}},[t._v("Edit")]),t._v(" "),t.user.isSuper?[o("a",{staticClass:"floor-opt",on:{click:function(o){return t.delFloor(e.id)}}},[t._v("Remove")])]:t._e()],2)])])}))],2),t._v(" "),o("input",{ref:"fpFile",attrs:{type:"file",hidden:"",accept:"image/*"},on:{change:t.fpFileChange}}),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{id:"add-btn"},on:{click:t.triggerAdd}},[t._v("Add Floor")]),t._v(" "),o("transition",{attrs:{name:"fadeUp",appear:""}},[null!==t.floor?o("section",{attrs:{id:"area-list"}},[o("h2",[t._v(t._s(t.floor.ordinal_no)+" Floor Areas")]),t._v(" "),0===t.areaList.length?o("div",{staticStyle:{margin:"16px"}},[t._v("No areas")]):o("ul",{staticClass:"custom-scroll"},t._l(t.areaList,(function(e){return o("li",{key:e.id},[o("div",{staticClass:"area-info"},[o("span",{staticClass:"area-name"},[t._v(t._s(e.group_id))]),t._v(" "),o("div",{staticClass:"area-opts"},[o("a",{staticClass:"area-opt",on:{click:function(o){return t.editArea(e.id)}}},[t._v("Edit")]),t._v(" "),t.user.isSuper?[o("a",{staticClass:"area-opt",on:{click:function(e){return t.delArea(t.f.id)}}},[t._v("Remove")])]:t._e()],2)])])})),0),t._v(" "),o("button",{staticClass:"btn btn-primary",attrs:{id:"add-area-btn"},on:{click:t.newArea}},[t._v("Add Area")])]):t._e()]),t._v(" "),t.showPlan?o("div",{staticClass:"fp-preview"},[o("loader",{attrs:{show:!t.state.imgLoaded,type:"spinner"}}),t._v(" "),t.state.imgLoaded?o("img",{attrs:{src:t.baseUrl+"/plans/"+t.floor.floor_plan}}):t._e(),t._v(" "),o("div",{staticClass:"preview-header"},[t._v("\n                        "+t._s(t.building.name+" - "+t.floor.ordinal_no+" Floor")+"\n                        "),o("span",{staticClass:"preview-close",on:{click:function(e){return t.togglePlan(!1)}}},[t._v("Close")])])],1):t._e()],1):t._e()])]:t._e(),t._v(" "),o("modal",{attrs:{show:t.showEntry},on:{close:function(e){return t.toggleEntry(!1)}},scopedSlots:t._u([{key:"header",fn:function(){return[o("h2",[t._v(t._s(t.editMode?"Edit":"Add")+" Floor")])]},proxy:!0},{key:"footer",fn:function(){return[t.editMode?o("button",{staticClass:"btn btn-primary",attrs:{disabled:t.state.saving},on:{click:t.upFloor}},[t._v(t._s(t.state.saving?"Updating...":"Update"))]):o("button",{staticClass:"btn btn-primary",attrs:{disabled:t.state.saving},on:{click:t.addFloor}},[t._v(t._s(t.state.saving?"Adding...":"Add"))])]},proxy:!0}])},[t._v(" "),o("div",{attrs:{id:"floor-entry"}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"input-field"},[o("label",[t._v("Floor No.")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.fNo,expression:"entry.fNo"}],ref:"fNo",attrs:{type:"number"},domProps:{value:t.entry.fNo},on:{input:function(e){e.target.composing||t.$set(t.entry,"fNo",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"input-field"},[o("label",[t._v("Occupancy Limit")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.occupancy_limit,expression:"entry.occupancy_limit"}],attrs:{type:"number"},domProps:{value:t.entry.occupancy_limit},on:{input:function(e){e.target.composing||t.$set(t.entry,"occupancy_limit",e.target.value)}}})])])]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6"},[o("div",{staticClass:"input-field"},[o("label",[t._v("Size (m"),o("sup",[t._v("2")]),t._v(")")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.size_sqm,expression:"entry.size_sqm"}],attrs:{type:"text"},domProps:{value:t.entry.size_sqm},on:{keyup:t.sqmKeyup,input:function(e){e.target.composing||t.$set(t.entry,"size_sqm",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-12 col-md-6"},[o("div",{staticClass:"input-field"},[o("label",[t._v("Size (ft"),o("sup",[t._v("2")]),t._v(")")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.size_sqft,expression:"entry.size_sqft"}],attrs:{type:"text"},domProps:{value:t.entry.size_sqft},on:{keyup:t.sqftKeyup,input:function(e){e.target.composing||t.$set(t.entry,"size_sqft",e.target.value)}}})])])])])]),t._v(" "),o("modal",{attrs:{id:"area-modal",show:t.areaModal},on:{close:function(e){return t.toggleAreaModal(!1)}},scopedSlots:t._u([{key:"header",fn:function(){return[o("h2",[t._v(t._s(t.editMode?"Edit":"Add")+" Area")])]},proxy:!0},{key:"footer",fn:function(){return[t.editMode?o("button",{staticClass:"btn btn-primary",attrs:{disabled:t.state.saving},on:{click:t.updateArea}},[t._v(t._s(t.state.saving?"Updating...":"Update"))]):o("button",{staticClass:"btn btn-primary",attrs:{disabled:t.state.saving},on:{click:t.addArea}},[t._v(t._s(t.state.saving?"Adding...":"Add"))])]},proxy:!0}])},[t._v(" "),o("div",{attrs:{id:"area-entry"}},[o("div",{staticClass:"input-field"},[o("label",[t._v("Name")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.areaEntry.group_id,expression:"areaEntry.group_id"}],ref:"group_id",attrs:{type:"text"},domProps:{value:t.areaEntry.group_id},on:{input:function(e){e.target.composing||t.$set(t.areaEntry,"group_id",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"input-field"},[o("label",[t._v("Type")]),t._v(" "),o("select",{directives:[{name:"model",rawName:"v-model",value:t.areaEntry.type,expression:"areaEntry.type"}],on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.areaEntry,"type",e.target.multiple?o:o[0])}}},t._l(t.areaTypes,(function(e){return o("option",{key:e.hid,domProps:{value:e.name}},[t._v(t._s(e.name))])})),0)]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12 col-md-6"},[o("div",{staticClass:"input-field"},[o("label",[t._v(t._s(t.areaByDesk?"Desks":"Seats"))]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.areaEntry.sensor_count,expression:"areaEntry.sensor_count"}],attrs:{type:"number"},domProps:{value:t.areaEntry.sensor_count},on:{input:function(e){e.target.composing||t.$set(t.areaEntry,"sensor_count",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-12 col-md-6"},[o("div",{staticClass:"input-field"},[o("label",[t._v("Limit")]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.areaEntry.limit,expression:"areaEntry.limit"}],attrs:{type:"number"},domProps:{value:t.areaEntry.limit},on:{input:function(e){e.target.composing||t.$set(t.areaEntry,"limit",e.target.value)}}})])])])])]),t._v(" "),o("loader",{attrs:{show:!t.loaded,type:"ripple"}})],2)}),[],!1,null,"7f47b67e",null);e.default=y.exports}}]);