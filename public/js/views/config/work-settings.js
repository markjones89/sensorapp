(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{122:function(t,n,o){"use strict";var e=o(34);o.n(e).a},123:function(t,n,o){(t.exports=o(7)(!1)).push([t.i,".company-logo[data-v-9a5259a2] {\n  display: inline-flex;\n  margin-top: 16px;\n}\n.company-logo .logo-holder[data-v-9a5259a2] {\n  position: relative;\n  height: 48px;\n  width: 150px;\n  padding: 10px;\n  border-radius: 10px;\n  overflow: hidden;\n}\n.company-logo .logo-holder .upload-trigger[data-v-9a5259a2] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: calc(100% - 2px);\n  font-size: 14px;\n  cursor: pointer;\n  border-radius: 10px;\n  border: 1px dashed rgba(255, 255, 255, 0.1);\n}\n.company-logo .logo-holder .upload-progress[data-v-9a5259a2] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #2B2B2B;\n}\n.company-logo .logo-holder img[data-v-9a5259a2] {\n  height: 100%;\n  width: auto;\n}\n.company-logo .logo-holder .logo-opt[data-v-9a5259a2] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  visibility: hidden;\n  opacity: 0;\n  transform: scale(1.25);\n  background-color: rgba(57, 57, 57, 0.8);\n  transition: visibility 0.24s, opacity 0.24s, transform 0.24s;\n}\n.company-logo .logo-holder:hover .logo-opt[data-v-9a5259a2] {\n  visibility: visible;\n  opacity: 1;\n  transform: scale(1);\n}\n.settings-section[data-v-9a5259a2] {\n  margin: 24px 0;\n}\n.settings-section .days-list[data-v-9a5259a2] {\n  padding: 10px 0;\n}\n.settings-section.hours-section[data-v-9a5259a2] {\n  margin-bottom: 32px;\n}",""])},215:function(t,n,o){"use strict";o.r(n);var e=o(1),a=o.n(e),i=o(4),s=o(5),r=o(2);function c(t,n,o,e,a,i,s){try{var r=t[i](s),c=r.value}catch(t){return void o(t)}r.done?n(c):Promise.resolve(c).then(e,a)}function d(t){return function(){var n=this,o=arguments;return new Promise((function(e,a){var i=t.apply(n,o);function s(t){c(i,e,a,s,r,"next",t)}function r(t){c(i,e,a,s,r,"throw",t)}s(void 0)}))}}var l="/api/work-configs",u=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],g={title:"Work Settings",components:{Checkbox:r.a,CircleProgress:r.b,Loader:r.e,TimeSlider:r.h},data:function(){return{loaded:!1,user:null,settings:null,entry:{start_time:null,end_time:null,work_days:[]},upload_info:{uploading:!1,progress:0},state:{saving:!1}}},computed:{baseUrl:function(){return Object(s.b)()},daysArr:function(){return u.map((function(t){return{name:t,short:t.substr(0,3)}}))}},methods:{timeFromChange:function(t){this.entry.start_time=t},timeToChange:function(t){this.entry.end_time=t},toggleSaving:function(t){this.state.saving=t},getSettings:function(){var t=this;return d(a.a.mark((function n(){var o,e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get(l,{params:{cid:t.user.cid}});case 2:o=n.sent,e=o.data,t.settings=e.ws,t.loaded=!0,t.settings?(t.entry.start_time=e.ws.start_time,t.entry.end_time=e.ws.end_time,t.entry.work_days=e.ws.work_days.split(",")):t.entry.work_days=u.map((function(t){return t.substr(0,3)}));case 7:case"end":return n.stop()}}),n)})))()},triggerSave:function(){this.settings?this.upSettings():this.addSettings()},addSettings:function(){var t=this;return d(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.post(l,{company:t.user.cid,start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(n){t.toggleSaving(!1);n.data}));case 2:case"end":return n.stop()}}),n)})))()},upSettings:function(){var t=this;return d(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.put("".concat(l,"/").concat(t.settings.hid),{start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(n){t.toggleSaving(!1);n.data}));case 2:case"end":return n.stop()}}),n)})))()},upLogo:function(){this.$refs.logoFile.click()},logoFileChange:function(){var t=this,n=t.$refs.logoFile.files[0];n&&(t.upload_info.uploading=!0,t.uploadLogo(n,(function(n,o){t.upload_info.uploading=!1,n?o.r&&i.a.setCompanyLogo(o.logo):console.error(o)})))},uploadLogo:function(t,n){var o=this;return d(a.a.mark((function e(){var i,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=o,(s=new window.FormData).append("logo",t),s.append("id",o.user.company.hid),axios.post("/api/clients/logo",s,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var n=Math.round(100*t.loaded/t.total);i.upload_info.progress=n}}).then((function(t){return n(!0,t.data)})).catch((function(t){return n(!1,t)}));case 4:case"end":return e.stop()}}),e)})))()}},created:function(){this.user=i.a.getUser()},mounted:function(){this.getSettings()}},p=(o(122),o(3)),v=Object(p.a)(g,(function(){var t=this,n=t.$createElement,o=t._self._c||n;return o("div",{staticClass:"content"},[o("h1",[t._v("Work Settings")]),t._v(" "),o("transition",{attrs:{name:"fadeUp"}},[t.loaded?o("div",{attrs:{id:"settings-panel"}},[o("div",{staticClass:"settings-section",attrs:{id:"company-settings"}},[o("h2",[t._v("Company Logo")]),t._v(" "),o("div",{staticClass:"company-logo"},[o("div",{staticClass:"logo-holder"},[t.upload_info.uploading?o("div",{staticClass:"upload-progress"},[o("circle-progress",{attrs:{percent:t.upload_info.progress}})],1):t._e(),t._v(" "),t.user.company.logo?o("img",{attrs:{src:t.baseUrl+"/storage/logos/"+t.user.company.logo}}):o("div",{staticClass:"upload-trigger",on:{click:t.upLogo}},[t._v("\n                            Add Logo\n                        ")]),t._v(" "),t.user.company.logo?o("div",{staticClass:"logo-opt",on:{click:t.upLogo}},[t._v("Change")]):t._e()])]),t._v(" "),o("input",{ref:"logoFile",attrs:{type:"file",hidden:"",accept:"image/*"},on:{change:t.logoFileChange}})]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col"},[o("div",{staticClass:"settings-section"},[o("h2",[t._v("Working Days")]),t._v(" "),o("div",{staticClass:"days-list"},t._l(t.daysArr,(function(n){return o("checkbox",{key:n.short,attrs:{label:n.name,val:n.short},model:{value:t.entry.work_days,callback:function(n){t.$set(t.entry,"work_days",n)},expression:"entry.work_days"}})})),1)])]),t._v(" "),o("div",{staticClass:"col"},[o("div",{staticClass:"settings-section hours-section"},[o("h2",[t._v("Working Hours")]),t._v(" "),o("time-slider",{attrs:{from:t.entry.start_time,to:t.entry.end_time},on:{startChanged:t.timeFromChange,endChanged:t.timeToChange}})],1)])]),t._v(" "),o("button",{staticClass:"btn btn-primary",on:{click:t.triggerSave}},[t._v("Save Settings")])]):t._e()]),t._v(" "),o("loader",{attrs:{show:!t.loaded,type:"ripple"}})],1)}),[],!1,null,"9a5259a2",null);n.default=v.exports},34:function(t,n,o){var e=o(123);"string"==typeof e&&(e=[[t.i,e,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};o(8)(e,a);e.locals&&(t.exports=e.locals)}}]);