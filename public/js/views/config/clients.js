(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{112:function(t,n,e){"use strict";var i=e(31);e.n(i).a},113:function(t,n,e){(t.exports=e(7)(!1)).push([t.i,"#client-list[data-v-77b7d616],#client-list #add-btn[data-v-77b7d616]{margin-top:24px}.client[data-v-77b7d616]{display:flex;font-size:20px;padding:10px;border-radius:10px;transition:background-color .24s linear}.client[data-v-77b7d616]:hover{background-color:hsla(0,0%,100%,.025)}.client .client-logo[data-v-77b7d616]{position:relative;width:170px;height:68px;overflow:hidden}.client .client-logo .logo-upload-progress[data-v-77b7d616]{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;font-size:14px;background-color:#2b2b2b;border-radius:10px;z-index:1}.client .client-logo .logo-upload-trigger[data-v-77b7d616]{display:flex;justify-content:center;align-items:center;height:calc(100% - 2px);font-size:14px;cursor:pointer;border:1px dashed hsla(0,0%,100%,.1);border-radius:10px}.client .client-logo .logo-holder[data-v-77b7d616]{position:relative;height:48px;padding:10px;border-radius:10px;text-align:center;overflow:hidden}.client .client-logo .logo-holder img[data-v-77b7d616]{height:100%;width:auto;max-width:100%;pointer-events:none}.client .client-logo .logo-holder .logo-opt[data-v-77b7d616]{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;cursor:pointer;font-size:14px;visibility:hidden;opacity:0;transform:scale(1.25);background-color:rgba(57,57,57,.8);transition:visibility .24s,opacity .24s,transform .24s}.client .client-logo .logo-holder:hover .logo-opt[data-v-77b7d616]{visibility:visible;opacity:1;transform:scale(1)}.client .client-info[data-v-77b7d616]{padding-left:16px}.client .client-opts[data-v-77b7d616]{line-height:13px}.client .client-opts .client-opt[data-v-77b7d616]{font-size:13px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.client .client-opts .client-opt[data-v-77b7d616]:hover{text-decoration:underline}#client-entry[data-v-77b7d616]{width:400px}",""])},221:function(t,n,e){"use strict";e.r(n);var i=e(1),o=e.n(i),a=e(5),r=e(2);function s(t,n,e,i,o,a,r){try{var s=t[a](r),c=s.value}catch(t){return void e(t)}s.done?n(c):Promise.resolve(c).then(i,o)}function c(t){return function(){var n=this,e=arguments;return new Promise((function(i,o){var a=t.apply(n,e);function r(t){s(a,i,o,r,c,"next",t)}function c(t){s(a,i,o,r,c,"throw",t)}r(void 0)}))}}var l="/api/clients",d={title:"Clients",components:{CircleProgress:r.b,Loader:r.e,Modal:r.g},data:function(){return{clients:[],cName:"",cId:null,loaded:!1,clientEntry:!1,editMode:!1,state:{saving:!1}}},computed:{baseUrl:function(){return Object(a.c)()},clientList:function(){return this.clients.sort((function(t,n){return t.name>n.name?1:t.name<n.name?-1:0}))}},methods:{getData:function(){var t=this;return c(o.a.mark((function n(){var e,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get(l);case 2:e=n.sent,(i=e.data).forEach((function(t){t.upload_info={uploading:!1,progress:0}})),t.clients=i,t.loaded=!0;case 7:case"end":return n.stop()}}),n)})))()},toggleEntry:function(t){var n=this;this.clientEntry=t,t&&setTimeout((function(){n.$refs.cName.focus()}),0)},toggleSaving:function(t){this.state.saving=t},triggerAdd:function(){this.cId=null,this.cName="",this.editMode=!1,this.toggleEntry(!0)},addClient:function(){var t=this;return c(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.post(l,{name:t.cName}).then((function(n){t.toggleSaving(!1);var e=n.data;e.r&&(e.data.upload_info={uploading:!1,progress:0},t.clients.push(e.data),t.toggleEntry(!1)),t.$mdtoast(e.m,{type:e.r?"success":"error",interaction:!0,interactionTimeout:5e3})}));case 2:case"end":return n.stop()}}),n)})))()},triggerEdit:function(t){var n=this.clients.find((function(n){return n.hid===t}));console.log(t),this.cId=t,this.cName=n.name,this.editMode=!0,this.toggleEntry(!0)},upClient:function(){var t=this;return c(o.a.mark((function n(){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.put("".concat(l,"/").concat(t.cId),{name:t.cName}).then((function(n){t.toggleSaving(!1);var e=n.data;e.r&&(t.clients.find((function(n){return n.hid==t.cId})).name=t.cName,t.toggleEntry(!1));t.$mdtoast(e.m,{type:e.r?"success":"error",interaction:!0,interactionTimeout:5e3})}));case 2:case"end":return n.stop()}}),n)})))()},delClient:function(t){var n=this;return c(o.a.mark((function e(){var i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(i=n).clients.findIndex((function(n){return n.hid===t})),i.$duDialog(null,"Remove ".concat(i.clients[a].name," from clients?"),i.$duDialog.OK_CANCEL,{okText:"Remove",callbacks:{okClick:function(n){this.hide(),i.toggleSaving(!0),axios.delete("".concat(l,"/").concat(t)).then((function(t){i.toggleSaving(!1);var n=t.data;n.r&&i.clients.splice(a,1),i.$mdtoast(n.m,{type:n.r?"success":"error",interaction:!0,interactionTimeout:5e3})}))}}});case 2:case"end":return e.stop()}}),e)})))()},upLogo:function(t){this.cId=t,this.$refs.logoFile.click()},logoFileChange:function(){var t=this,n=t.$refs.logoFile.files[0];if(n){var e=t.clients.find((function(n){return n.hid===t.cId}));e.upload_info.uploading=!0,t.uploadLogo(n,(function(t,n){e.upload_info.uploading=!1,t?n.r&&(e.logo=n.logo):console.error(n)}))}},uploadLogo:function(t,n){var e=this;return c(o.a.mark((function i(){var a,r;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=new window.FormData,r=e.clients.find((function(t){return t.hid===e.cId})),a.append("logo",t),a.append("id",e.cId),axios.post("".concat(l,"/logo"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var n=Math.round(100*t.loaded/t.total);r.upload_info.progress=n}}).then((function(t){return n(!0,t.data)})).catch((function(t){return n(!1,t)}));case 4:case"end":return i.stop()}}),i)})))()}},mounted:function(){this.getData()}},u=(e(112),e(3)),p=Object(u.a)(d,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content"},[e("h1",[t._v("Clients")]),t._v(" "),e("transition",{attrs:{name:"fadeUp"}},[t.loaded?e("div",{attrs:{id:"client-list"}},[t._l(t.clientList,(function(n){return e("div",{key:n.hid,staticClass:"client"},[e("div",{staticClass:"client-logo"},[n.upload_info.uploading?e("div",{staticClass:"logo-upload-progress"},[e("circle-progress",{attrs:{percent:n.upload_info.progress}})],1):t._e(),t._v(" "),n.logo?e("div",{staticClass:"logo-holder"},[e("img",{attrs:{src:t.baseUrl+"/storage/logos/"+n.logo}}),t._v(" "),e("a",{staticClass:"logo-opt",on:{click:function(e){return t.upLogo(n.hid)}}},[t._v("Change Logo")])]):e("div",{staticClass:"logo-upload-trigger",on:{click:function(e){return t.upLogo(n.hid)}}},[t._v("\n                        Add Logo\n                    ")])]),t._v(" "),e("div",{staticClass:"client-info"},[e("div",{staticClass:"client-opts"},[e("a",{staticClass:"client-opt",on:{click:function(e){return t.triggerEdit(n.hid)}}},[t._v("Edit")]),t._v(" "),e("a",{staticClass:"client-opt",on:{click:function(e){return t.delClient(n.hid)}}},[t._v("Remove")])]),t._v("\n                "+t._s(n.name)+"\n                ")])])})),t._v(" "),e("input",{ref:"logoFile",attrs:{type:"file",hidden:"",accept:"image/*"},on:{change:t.logoFileChange}}),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{id:"add-btn"},on:{click:t.triggerAdd}},[t._v("Add Client")])],2):t._e()]),t._v(" "),e("modal",{attrs:{show:t.clientEntry},on:{close:function(n){return t.toggleEntry(!1)}},scopedSlots:t._u([{key:"header",fn:function(){return[e("h2",[t._v(t._s(t.editMode?"Edit":"Add")+" Client")])]},proxy:!0},{key:"footer",fn:function(){return[t.editMode?e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.state.saving},on:{click:t.upClient}},[t._v(t._s(t.state.saving?"Updating...":"Update"))]):e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.state.saving},on:{click:t.addClient}},[t._v(t._s(t.state.saving?"Adding...":"Add"))])]},proxy:!0}])},[t._v(" "),e("div",{attrs:{id:"client-entry"}},[e("div",{staticClass:"input-field"},[e("label",[t._v("Company Name")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.cName,expression:"cName"}],ref:"cName",attrs:{type:"text"},domProps:{value:t.cName},on:{input:function(n){n.target.composing||(t.cName=n.target.value)}}})])])]),t._v(" "),e("loader",{attrs:{show:!t.loaded,type:"ripple"}})],1)}),[],!1,null,"77b7d616",null);n.default=p.exports},31:function(t,n,e){var i=e(113);"string"==typeof i&&(i=[[t.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(8)(i,o);i.locals&&(t.exports=i.locals)}}]);