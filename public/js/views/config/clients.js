(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{112:function(n,t,e){"use strict";var i=e(31);e.n(i).a},113:function(n,t,e){(n.exports=e(7)(!1)).push([n.i,"#client-list[data-v-77b7d616] {\n  margin-top: 24px;\n}\n#client-list #add-btn[data-v-77b7d616] {\n  margin-top: 24px;\n}\n.client[data-v-77b7d616] {\n  display: flex;\n  font-size: 20px;\n  padding: 10px;\n  border-radius: 10px;\n  transition: background-color 0.24s linear;\n}\n.client[data-v-77b7d616]:hover {\n  background-color: rgba(255, 255, 255, 0.025);\n}\n.client .client-logo[data-v-77b7d616] {\n  position: relative;\n  width: 170px;\n  height: 68px;\n  overflow: hidden;\n}\n.client .client-logo .logo-upload-progress[data-v-77b7d616] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 14px;\n  background-color: #2B2B2B;\n  border-radius: 10px;\n  z-index: 1;\n}\n.client .client-logo .logo-upload-trigger[data-v-77b7d616] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: calc(100% - 2px);\n  font-size: 14px;\n  cursor: pointer;\n  border: 1px dashed rgba(255, 255, 255, 0.1);\n  border-radius: 10px;\n}\n.client .client-logo .logo-holder[data-v-77b7d616] {\n  position: relative;\n  height: 48px;\n  padding: 10px;\n  border-radius: 10px;\n  text-align: center;\n  overflow: hidden;\n}\n.client .client-logo .logo-holder img[data-v-77b7d616] {\n  height: 100%;\n  width: auto;\n  max-width: 100%;\n  pointer-events: none;\n}\n.client .client-logo .logo-holder .logo-opt[data-v-77b7d616] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  font-size: 14px;\n  visibility: hidden;\n  opacity: 0;\n  transform: scale(1.25);\n  background-color: rgba(57, 57, 57, 0.8);\n  transition: visibility 0.24s, opacity 0.24s, transform 0.24s;\n}\n.client .client-logo .logo-holder:hover .logo-opt[data-v-77b7d616] {\n  visibility: visible;\n  opacity: 1;\n  transform: scale(1);\n}\n.client .client-info[data-v-77b7d616] {\n  padding-left: 16px;\n}\n.client .client-opts[data-v-77b7d616] {\n  line-height: 13px;\n}\n.client .client-opts .client-opt[data-v-77b7d616] {\n  font-size: 13px;\n  cursor: pointer;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n.client .client-opts .client-opt[data-v-77b7d616]:hover {\n  text-decoration: underline;\n}\n#client-entry[data-v-77b7d616] {\n  width: 400px;\n}",""])},221:function(n,t,e){"use strict";e.r(t);var i=e(1),o=e.n(i),a=e(5),r=e(2);function s(n,t,e,i,o,a,r){try{var s=n[a](r),c=s.value}catch(n){return void e(n)}s.done?t(c):Promise.resolve(c).then(i,o)}function c(n){return function(){var t=this,e=arguments;return new Promise((function(i,o){var a=n.apply(t,e);function r(n){s(a,i,o,r,c,"next",n)}function c(n){s(a,i,o,r,c,"throw",n)}r(void 0)}))}}var l="/api/clients",d={title:"Clients",components:{CircleProgress:r.b,Loader:r.e,Modal:r.g},data:function(){return{clients:[],cName:"",cId:null,loaded:!1,clientEntry:!1,editMode:!1,state:{saving:!1}}},computed:{baseUrl:function(){return Object(a.c)()},clientList:function(){return this.clients.sort((function(n,t){return n.name>t.name?1:n.name<t.name?-1:0}))}},methods:{getData:function(){var n=this;return c(o.a.mark((function t(){var e,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,axios.get(l);case 2:e=t.sent,(i=e.data).forEach((function(n){n.upload_info={uploading:!1,progress:0}})),n.clients=i,n.loaded=!0;case 7:case"end":return t.stop()}}),t)})))()},toggleEntry:function(n){var t=this;this.clientEntry=n,n&&setTimeout((function(){t.$refs.cName.focus()}),0)},toggleSaving:function(n){this.state.saving=n},triggerAdd:function(){this.cId=null,this.cName="",this.editMode=!1,this.toggleEntry(!0)},addClient:function(){var n=this;return c(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.toggleSaving(!0),axios.post(l,{name:n.cName}).then((function(t){n.toggleSaving(!1);var e=t.data;e.r&&(e.data.upload_info={uploading:!1,progress:0},n.clients.push(e.data),n.toggleEntry(!1)),n.$mdtoast(e.m,{type:e.r?"success":"error",interaction:!0,interactionTimeout:5e3})}));case 2:case"end":return t.stop()}}),t)})))()},triggerEdit:function(n){var t=this.clients.find((function(t){return t.hid===n}));console.log(n),this.cId=n,this.cName=t.name,this.editMode=!0,this.toggleEntry(!0)},upClient:function(){var n=this;return c(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.toggleSaving(!0),axios.put("".concat(l,"/").concat(n.cId),{name:n.cName}).then((function(t){n.toggleSaving(!1);var e=t.data;e.r&&(n.clients.find((function(t){return t.hid==n.cId})).name=n.cName,n.toggleEntry(!1));n.$mdtoast(e.m,{type:e.r?"success":"error",interaction:!0,interactionTimeout:5e3})}));case 2:case"end":return t.stop()}}),t)})))()},delClient:function(n){var t=this;return c(o.a.mark((function e(){var i,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=(i=t).clients.findIndex((function(t){return t.hid===n})),i.$duDialog(null,"Remove ".concat(i.clients[a].name," from clients?"),i.$duDialog.OK_CANCEL,{okText:"Remove",callbacks:{okClick:function(t){this.hide(),i.toggleSaving(!0),axios.delete("".concat(l,"/").concat(n)).then((function(n){i.toggleSaving(!1);var t=n.data;t.r&&i.clients.splice(a,1),i.$mdtoast(t.m,{type:t.r?"success":"error",interaction:!0,interactionTimeout:5e3})}))}}});case 2:case"end":return e.stop()}}),e)})))()},upLogo:function(n){this.cId=n,this.$refs.logoFile.click()},logoFileChange:function(){var n=this,t=n.$refs.logoFile.files[0];if(t){var e=n.clients.find((function(t){return t.hid===n.cId}));e.upload_info.uploading=!0,n.uploadLogo(t,(function(n,t){e.upload_info.uploading=!1,n?t.r&&(e.logo=t.logo):console.error(t)}))}},uploadLogo:function(n,t){var e=this;return c(o.a.mark((function i(){var a,r;return o.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=new window.FormData,r=e.clients.find((function(n){return n.hid===e.cId})),a.append("logo",n),a.append("id",e.cId),axios.post("".concat(l,"/logo"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(n){var t=Math.round(100*n.loaded/n.total);r.upload_info.progress=t}}).then((function(n){return t(!0,n.data)})).catch((function(n){return t(!1,n)}));case 4:case"end":return i.stop()}}),i)})))()}},mounted:function(){this.getData()}},u=(e(112),e(3)),p=Object(u.a)(d,(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"content"},[e("h1",[n._v("Clients")]),n._v(" "),e("transition",{attrs:{name:"fadeUp"}},[n.loaded?e("div",{attrs:{id:"client-list"}},[n._l(n.clientList,(function(t){return e("div",{key:t.hid,staticClass:"client"},[e("div",{staticClass:"client-logo"},[t.upload_info.uploading?e("div",{staticClass:"logo-upload-progress"},[e("circle-progress",{attrs:{percent:t.upload_info.progress}})],1):n._e(),n._v(" "),t.logo?e("div",{staticClass:"logo-holder"},[e("img",{attrs:{src:n.baseUrl+"/storage/logos/"+t.logo}}),n._v(" "),e("a",{staticClass:"logo-opt",on:{click:function(e){return n.upLogo(t.hid)}}},[n._v("Change Logo")])]):e("div",{staticClass:"logo-upload-trigger",on:{click:function(e){return n.upLogo(t.hid)}}},[n._v("\n                        Add Logo\n                    ")])]),n._v(" "),e("div",{staticClass:"client-info"},[e("div",{staticClass:"client-opts"},[e("a",{staticClass:"client-opt",on:{click:function(e){return n.triggerEdit(t.hid)}}},[n._v("Edit")]),n._v(" "),e("a",{staticClass:"client-opt",on:{click:function(e){return n.delClient(t.hid)}}},[n._v("Remove")])]),n._v("\n                "+n._s(t.name)+"\n                ")])])})),n._v(" "),e("input",{ref:"logoFile",attrs:{type:"file",hidden:"",accept:"image/*"},on:{change:n.logoFileChange}}),n._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{id:"add-btn"},on:{click:n.triggerAdd}},[n._v("Add Client")])],2):n._e()]),n._v(" "),e("modal",{attrs:{show:n.clientEntry},on:{close:function(t){return n.toggleEntry(!1)}},scopedSlots:n._u([{key:"header",fn:function(){return[e("h2",[n._v(n._s(n.editMode?"Edit":"Add")+" Client")])]},proxy:!0},{key:"footer",fn:function(){return[n.editMode?e("button",{staticClass:"btn btn-primary",attrs:{disabled:n.state.saving},on:{click:n.upClient}},[n._v(n._s(n.state.saving?"Updating...":"Update"))]):e("button",{staticClass:"btn btn-primary",attrs:{disabled:n.state.saving},on:{click:n.addClient}},[n._v(n._s(n.state.saving?"Adding...":"Add"))])]},proxy:!0}])},[n._v(" "),e("div",{attrs:{id:"client-entry"}},[e("div",{staticClass:"input-field"},[e("label",[n._v("Company Name")]),n._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:n.cName,expression:"cName"}],ref:"cName",attrs:{type:"text"},domProps:{value:n.cName},on:{input:function(t){t.target.composing||(n.cName=t.target.value)}}})])])]),n._v(" "),e("loader",{attrs:{show:!n.loaded,type:"ripple"}})],1)}),[],!1,null,"77b7d616",null);t.default=p.exports},31:function(n,t,e){var i=e(113);"string"==typeof i&&(i=[[n.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};e(8)(i,o);i.locals&&(n.exports=i.locals)}}]);