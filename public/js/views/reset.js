(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{107:function(e,t,a){"use strict";a(42)},108:function(e,t,a){(e.exports=a(6)(!1)).push([e.i,"#app-login[data-v-499aa758]{padding:92px 0;width:100%}#app-login #login-wrapper[data-v-499aa758]{width:300px;margin:0 auto;background-color:#282737;padding:24px;border-radius:10px}#app-login #login-wrapper h1[data-v-499aa758]{margin-bottom:24px;text-align:center}#login-wrapper h1[data-v-499aa758]{margin-bottom:8px!important}#login-wrapper h2[data-v-499aa758]{text-align:center;margin-bottom:24px}",""])},292:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n);function r(e,t,a,n,s,r,i){try{var o=e[r](i),d=o.value}catch(e){return void a(e)}o.done?t(d):Promise.resolve(d).then(n,s)}function i(e){return function(){var t=this,a=arguments;return new Promise((function(n,s){var i=e.apply(t,a);function o(e){r(i,n,s,o,d,"next",e)}function d(e){r(i,n,s,o,d,"throw",e)}o(void 0)}))}}var o={props:["uid"],data:function(){return{user:null,email:"",password:"",newPass:"",newPassConfirm:"",state:{loaded:!1,sending:!1,changing:!1,linkSent:!1,resetMode:!1,resetDone:!1}}},methods:{sendReset:function(){var e=this;return i(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state.sending=!0,t.next=3,axios.post("/reset/send-link",{email:e.email});case 3:a=t.sent,n=a.data,e.state.sending=!1,e.state.linkSent=n.r,e.$mdtoast(n.m,{type:n.r?"success":"error",interaction:!0,interactionTimeout:5e3});case 8:case"end":return t.stop()}}),t)})))()},changePass:function(){var e=this;return i(s.a.mark((function t(){var a,n,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.newPass.trim(),n=e.newPassConfirm.trim(),a===n){t.next=5;break}e.$mdtoast("Password confirmation doesn't match",{type:"warning",interaction:!0,interactionTimeout:5e3}),t.next=13;break;case 5:return e.state.changing=!0,t.next=8,axios.put("".concat("/api/users","/reset-pass/").concat(e.uid),{password:a});case 8:r=t.sent,i=r.data,e.state.changing=!1,e.state.resetDone=i.r,e.$mdtoast(i.m,{type:i.r?"success":"error",interaction:!0,interactionTimeout:5e3});case 13:case"end":return t.stop()}}),t)})))()},inputKeydown:function(e){13===e.keyCode&&(this.state.resetMode?this.changePass():this.sendReset())}},created:function(){var e=this;return i(s.a.mark((function t(){var a,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.resetMode=null!==e.uid&&void 0!==e.uid,console.log("uid",e.uid,e.state.resetMode),!e.uid){t.next=9;break}return t.next=5,axios.get("".concat("/api/users","/").concat(e.uid));case 5:a=t.sent,n=a.data,e.user=n,console.log("user",n);case 9:e.state.loaded=!0;case 10:case"end":return t.stop()}}),t)})))()}},d=(a(107),a(3)),c=Object(d.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.state.loaded?a("div",{attrs:{id:"app-login"}},[e.state.resetMode?a("div",{attrs:{id:"login-wrapper"}},[a("h1",[e._v("Reset password for")]),e._v(" "),a("h2",[e._v(e._s(e.user.email))]),e._v(" "),e.state.resetDone?[a("p",[e._v("Your password has been successfully changed!")]),e._v(" "),a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/login"}},[e._v("Go to login")])]:[a("div",{staticClass:"input-field"},[a("label",[e._v("New Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newPass,expression:"newPass"}],attrs:{type:"password",placeholder:"New Password",autofocus:"",disabled:e.state.changing},domProps:{value:e.newPass},on:{keydown:e.inputKeydown,input:function(t){t.target.composing||(e.newPass=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"input-field"},[a("label",[e._v("Confirm Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassConfirm,expression:"newPassConfirm"}],attrs:{type:"password",placeholder:"Confirm Password",autofocus:"",disabled:e.state.changing},domProps:{value:e.newPassConfirm},on:{keydown:e.inputKeydown,input:function(t){t.target.composing||(e.newPassConfirm=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.state.changing},on:{click:e.changePass}},[e._v(e._s(e.state.changing?"Changing password...":"Change password"))])]],2):a("div",{attrs:{id:"login-wrapper"}},[e.state.linkSent?[a("h1",[e._v("Reset link sent")]),e._v(" "),a("p",[e._v("Kindly check your email for the reset link.")]),e._v(" "),a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/login"}},[e._v("Go to login")])]:[a("h1",[e._v("Reset your password")]),e._v(" "),a("div",{staticClass:"input-field"},[a("label",[e._v("Verified account's email")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"Email",autofocus:"",disabled:e.state.sending},domProps:{value:e.email},on:{keydown:e.inputKeydown,input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),a("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.state.sending},on:{click:e.sendReset}},[e._v(e._s(e.state.sending?"Sending reset link...":"Send reset link"))])]],2)]):e._e()}),[],!1,null,"499aa758",null);t.default=c.exports},42:function(e,t,a){var n=a(108);"string"==typeof n&&(n=[[e.i,n,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(7)(n,s);n.locals&&(e.exports=n.locals)}}]);