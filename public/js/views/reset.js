(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{107:function(e,t,n){"use strict";n(42)},108:function(e,t,n){(e.exports=n(6)(!1)).push([e.i,"#app-login[data-v-c9e8244c]{padding:92px 0;width:100%}#app-login #login-wrapper[data-v-c9e8244c]{width:320px;margin:0 auto;background-color:#282737;padding:24px;border-radius:10px}#app-login #login-wrapper h1[data-v-c9e8244c]{margin-bottom:24px;text-align:center}#login-wrapper h1[data-v-c9e8244c]{margin-bottom:8px!important}#login-wrapper h2[data-v-c9e8244c]{text-align:center;margin-bottom:24px}",""])},292:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a);function r(e,t,n,a,s,r,i){try{var o=e[r](i),c=o.value}catch(e){return void n(e)}o.done?t(c):Promise.resolve(c).then(a,s)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function o(e){r(i,a,s,o,c,"next",e)}function c(e){r(i,a,s,o,c,"throw",e)}o(void 0)}))}}var o={title:"Password Reset",props:["uid"],data:function(){return{user:null,email:"",password:"",newPass:"",newPassConfirm:"",state:{loaded:!1,sending:!1,changing:!1,linkSent:!1,resetMode:!1,resetDone:!1}}},methods:{sendReset:function(){var e=this;return i(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.state.sending=!0,t.next=3,axios.post("/reset/send-link",{email:e.email});case 3:n=t.sent,a=n.data,e.state.sending=!1,e.state.linkSent=a.r,e.$mdtoast(a.m,{type:a.r?"success":"error",interaction:!0,interactionTimeout:5e3});case 8:case"end":return t.stop()}}),t)})))()},changePass:function(){var e=this;return i(s.a.mark((function t(){var n,a,r,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.newPass.trim(),a=e.newPassConfirm.trim(),n===a){t.next=5;break}e.$mdtoast("Password confirmation doesn't match",{type:"warning",interaction:!0,interactionTimeout:5e3}),t.next=13;break;case 5:return e.state.changing=!0,t.next=8,axios.put("".concat("/api/users","/reset-pass/").concat(e.uid),{password:n});case 8:r=t.sent,i=r.data,e.state.changing=!1,e.state.resetDone=i.r,e.$mdtoast(i.m,{type:i.r?"success":"error",interaction:!0,interactionTimeout:5e3});case 13:case"end":return t.stop()}}),t)})))()},inputKeydown:function(e){13===e.keyCode&&(this.state.resetMode?this.changePass():this.sendReset())}},created:function(){var e=this;return i(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.resetMode=null!==e.uid&&void 0!==e.uid,!e.uid){t.next=7;break}return t.next=4,axios.get("".concat("/api/users","/").concat(e.uid));case 4:n=t.sent,a=n.data,e.user=a;case 7:e.state.loaded=!0;case 8:case"end":return t.stop()}}),t)})))()}},c=(n(107),n(3)),d=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.state.loaded?n("div",{attrs:{id:"app-login"}},[e.state.resetMode?n("div",{attrs:{id:"login-wrapper"}},[n("h1",[e._v("Reset password for")]),e._v(" "),n("h2",[e._v(e._s(e.user.email))]),e._v(" "),e.state.resetDone?[n("p",[e._v("Your password has been successfully changed!")]),e._v(" "),n("router-link",{staticClass:"btn btn-primary",attrs:{to:"/login"}},[e._v("Go to login")])]:[n("div",{staticClass:"input-field"},[n("label",[e._v("New Password")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPass,expression:"newPass"}],attrs:{type:"password",placeholder:"New Password",autofocus:"",disabled:e.state.changing},domProps:{value:e.newPass},on:{keydown:e.inputKeydown,input:function(t){t.target.composing||(e.newPass=t.target.value)}}})]),e._v(" "),n("div",{staticClass:"input-field"},[n("label",[e._v("Confirm Password")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassConfirm,expression:"newPassConfirm"}],attrs:{type:"password",placeholder:"Confirm Password",autofocus:"",disabled:e.state.changing},domProps:{value:e.newPassConfirm},on:{keydown:e.inputKeydown,input:function(t){t.target.composing||(e.newPassConfirm=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.state.changing},on:{click:e.changePass}},[e._v(e._s(e.state.changing?"Changing password...":"Change password"))])]],2):n("div",{attrs:{id:"login-wrapper"}},[e.state.linkSent?[n("h1",[e._v("Reset link sent")]),e._v(" "),n("p",[e._v("Kindly check your email for the reset link.")]),e._v(" "),n("router-link",{staticClass:"btn btn-primary",attrs:{to:"/login"}},[e._v("Go to login")])]:[n("h1",[e._v("Reset your password")]),e._v(" "),n("div",{staticClass:"input-field"},[n("label",[e._v("Verified account's email")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{type:"text",placeholder:"Email",autofocus:"",disabled:e.state.sending},domProps:{value:e.email},on:{keydown:e.inputKeydown,input:function(t){t.target.composing||(e.email=t.target.value)}}})]),e._v(" "),n("button",{staticClass:"btn btn-primary btn-block",attrs:{disabled:e.state.sending},on:{click:e.sendReset}},[e._v(e._s(e.state.sending?"Sending reset link...":"Send reset link"))])]],2)]):e._e()}),[],!1,null,"c9e8244c",null);t.default=d.exports},42:function(e,t,n){var a=n(108);"string"==typeof a&&(a=[[e.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(7)(a,s);a.locals&&(e.exports=a.locals)}}]);