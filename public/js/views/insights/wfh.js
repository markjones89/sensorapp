(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{21:function(t,n,e){var i=e(97);"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(8)(i,a);i.locals&&(t.exports=i.locals)},212:function(t,n,e){"use strict";e.r(n);var i=e(1),a=e.n(i),s=e(4),r=e(6),o=e(2),l=e(12);function c(t,n,e,i,a,s,r){try{var o=t[s](r),l=o.value}catch(t){return void e(t)}o.done?n(l):Promise.resolve(l).then(i,a)}function d(t){return function(){var n=this,e=arguments;return new Promise((function(i,a){var s=t.apply(n,e);function r(t){c(s,i,a,r,o,"next",t)}function o(t){c(s,i,a,r,o,"throw",t)}r(void 0)}))}}var u="/api/locations",f="/api/floors";function g(){return Math.floor(100*Math.random()+1)}var h={title:"Work From Home",components:{BuildingSvg:l.a,CaretIcon:r.a,CaretLeftIcon:r.b,Checkbox:o.a,DateRangeToggle:o.c,FilterDropdown:o.d,HouseSvg:l.b,Loader:o.e,TimeSlider:o.h},data:function(){return{user:null,loaded:!1,showPageOpts:!1,showEmbed:!1,showFilter:!1,buildings:[],floors:[],building:null,bldgFilter:null,wfhStat:0,bldgStat:0,timeFilter:{start:null,end:null}}},computed:{settings:function(){return this.user.company?this.user.company.settings:null},buildingFilters:function(){return this.buildings.map((function(t){return{value:t.hid,label:t.name}}))}},methods:{backTo:function(){},getBuildings:function(){var t=this;return d(a.a.mark((function n(){var e,i,s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.user.company){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,axios.get(u,{params:{cid:e.hid,lob:!0}});case 5:i=n.sent,s=i.data,t.buildings=s,t.bldg_id?t.building=s.find((function(n){return n.hid===t.bldg_id})):t.building=s[0],t.bldgFilter=t.building.name,t.getFloors(t.building.hid,(function(){t.loaded=!0,t.wfhStat=g(),t.bldgStat=100-t.wfhStat}));case 11:case"end":return n.stop()}}),n)})))()},getFloors:function(t,n){var e=this;return d(a.a.mark((function i(){var s,r,o;return a.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,axios.get(f,{params:{bid:t}});case 2:return s=i.sent,r=s.data,o=r.sort((function(t,n){return t.floor_no>n.floor_no?1:t.floor_no<n.floor_no?-1:0})),e.floors=o.slice(0),i.abrupt("return",n&&n());case 7:case"end":return i.stop()}}),i)})))()},filterSelect:function(t){var n=this;this.showFilter=!1,this.building=this.buildings.find((function(n){return n.hid===t})),this.bldgFilter=this.building.name,this.getFloors(this.building.hid,(function(){n.wfhStat=g(),n.bldgStat=100-n.wfhStat}))},toCostAnalysis:function(){this.$router.push({name:"cost-analysis"})},rangeSelect:function(t,n,e){},timeStartChange:function(t){this.timeFilter.start=t},timeEndChange:function(t){this.timeFilter.end=t},toggleEmbed:function(t){t&&(this.showPageOpts=!1),this.showEmbed=t}},created:function(){this.user=s.a.getUser()},mounted:function(){this.getBuildings()}},p=(e(96),e(3)),v=Object(p.a)(h,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content"},[t.loaded&&t.building?[e("div",{staticClass:"graph-header"},[e("date-range-toggle",{on:{select:t.rangeSelect}}),t._v(" "),e("div",{staticClass:"graph-filters"},[e("span",{staticClass:"graph-filter",on:{click:function(n){t.showFilter=!t.showFilter}}},[t._v("\n                    "+t._s(t.bldgFilter?t.bldgFilter:"Select Building")+"\n                    "),e("span",{staticClass:"caret"},[e("caret-icon")],1),t._v(" "),e("filter-dropdown",{attrs:{filters:t.buildingFilters,show:t.showFilter},on:{onSelect:t.filterSelect}})],1),t._v(" "),e("a",{staticClass:"btn btn-primary ml-12",attrs:{href:"javascript:;"},on:{click:t.toCostAnalysis}},[t._v("Cost Analysis")])]),t._v(" "),e("span",{staticClass:"page-opt-trigger",attrs:{role:"button"},on:{click:function(n){t.showPageOpts=!t.showPageOpts}}},[e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"})]),t._v(" "),e("transition",{attrs:{name:"fadeUp"}},[t.showPageOpts?e("div",{staticClass:"page-opt-panel"},[e("ul",[e("li",[e("a",{on:{click:function(n){return t.toggleEmbed(!0)}}},[t._v("Embed")])])])]):t._e()])],1),t._v(" "),e("div",{staticClass:"graph-content"},[e("div",{staticClass:"chart-header"},[e("span",{staticClass:"chart-title"},[t._v(t._s("Work From Home - "+t.building.name))])]),t._v(" "),e("div",{attrs:{id:"wfh-content"}},[e("div",{attrs:{id:"house-wrapper"}},[e("house-svg"),t._v(" "),e("span",{staticClass:"stat"},[t._v(t._s(t.wfhStat+"%"))])],1),t._v(" "),e("div",{attrs:{id:"building-wrapper"}},[e("building-svg",{attrs:{floors:t.floors}}),t._v(" "),e("span",{staticClass:"stat"},[t._v(t._s(t.bldgStat+"%"))])],1)]),t._v(" "),e("time-slider",{attrs:{from:t.settings?t.settings.start_time:null,to:t.settings?t.settings.end_time:null},on:{startChanged:t.timeStartChange,endChanged:t.timeEndChange}}),t._v(" "),e("div",{staticClass:"clearfix"})],1),t._v(" "),e("div",{staticClass:"graph-footer"},[e("div",{staticClass:"left-options"}),t._v(" "),e("div",{staticClass:"right-options"},[e("checkbox",{attrs:{label:"Save to report"}})],1)])]:t._e(),t._v(" "),e("loader",{attrs:{show:!t.loaded,type:"ripple"}})],2)}),[],!1,null,"639b49fe",null);n.default=v.exports},96:function(t,n,e){"use strict";var i=e(21);e.n(i).a},97:function(t,n,e){(t.exports=e(7)(!1)).push([t.i,"#wfh-content[data-v-639b49fe] {\n  position: relative;\n}\n#wfh-content .stat[data-v-639b49fe] {\n  position: absolute;\n  font-weight: bold;\n  font-size: 16px;\n  text-align: center;\n  min-width: 48px;\n  line-height: 48px;\n  border-radius: 50%;\n  bottom: 16px;\n  background-color: #FF5A09;\n}\n#wfh-content #house-wrapper[data-v-639b49fe] {\n  position: relative;\n  display: inline-block;\n  padding: 0 0 32px 0;\n}\n#wfh-content #house-wrapper .house-svg[data-v-639b49fe] {\n  transform: scale(0.95);\n  transform-origin: bottom;\n}\n#wfh-content #house-wrapper .stat[data-v-639b49fe] {\n  margin-left: 90px;\n}\n#wfh-content #building-wrapper[data-v-639b49fe] {\n  position: relative;\n  display: inline-block;\n  padding: 0 0 32px 0;\n}\n#wfh-content #building-wrapper .building-svg[data-v-639b49fe] {\n  transform: scale(0.4);\n  transform-origin: bottom;\n}\n#wfh-content #building-wrapper .stat[data-v-639b49fe] {\n  margin-left: 75px;\n}",""])}}]);