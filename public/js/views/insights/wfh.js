(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{100:function(t,n,i){"use strict";var e=i(25);i.n(e).a},101:function(t,n,i){(t.exports=i(7)(!1)).push([t.i,"#wfh-content[data-v-2175c8cd]{position:relative}#wfh-content .stat[data-v-2175c8cd]{position:absolute;font-weight:700;font-size:16px;text-align:center;min-width:48px;line-height:48px;border-radius:50%;bottom:16px;background-color:#ff5a09}#wfh-content #house-wrapper[data-v-2175c8cd]{position:relative;display:inline-block;padding:0 0 32px}#wfh-content #house-wrapper .house-svg[data-v-2175c8cd]{transform-origin:bottom;transition:transform .4s}#wfh-content #house-wrapper .stat[data-v-2175c8cd]{margin-left:90px}#wfh-content #building-wrapper[data-v-2175c8cd]{position:relative;display:inline-block;padding:0 0 32px}#wfh-content #building-wrapper .building-svg[data-v-2175c8cd]{transform-origin:bottom;transition:transform .4s}#wfh-content #building-wrapper .stat[data-v-2175c8cd]{margin-left:120px}",""])},216:function(t,n,i){"use strict";i.r(n);var e=i(1),s=i.n(e),a=i(4),r=i(6),o=i(2),l=i(13);function c(t,n,i,e,s,a,r){try{var o=t[a](r),l=o.value}catch(t){return void i(t)}o.done?n(l):Promise.resolve(l).then(e,s)}function u(t){return function(){var n=this,i=arguments;return new Promise((function(e,s){var a=t.apply(n,i);function r(t){c(a,e,s,r,o,"next",t)}function o(t){c(a,e,s,r,o,"throw",t)}r(void 0)}))}}var d="/api/locations",h="/api/floors";function f(){return Math.floor(100*Math.random()+1)}var p={title:"Work From Home",components:{BuildingSvg:l.a,CaretIcon:r.a,CaretLeftIcon:r.b,Checkbox:o.a,DateRangeToggle:o.c,FilterDropdown:o.d,HouseSvg:l.b,Loader:o.e,TimeSlider:o.h},data:function(){return{user:null,loaded:!1,showPageOpts:!1,showEmbed:!1,showFilter:!1,buildings:[],floors:[],building:null,bldgFilter:null,wfhStat:0,bldgStat:0,timeFilter:{start:null,end:null},minuteFilter:"10 minutes",showMinuteFilter:!1}},computed:{settings:function(){return this.user.company?this.user.company.settings:null},buildingFilters:function(){return this.buildings.map((function(t){return{value:t.hid,label:t.name}}))},homeScale:function(){return(this.wfhStat<25?25:this.wfhStat)/100},bldgScale:function(){return(this.bldgStat<25?25:this.bldgStat)/100},minuteFilters:function(){return[10,15,30,45,60,120,240,480].map((function(t){return{value:t,label:"".concat(t," minutes")}}))}},methods:{backTo:function(){this.$router.back()},getBuildings:function(){var t=this;return u(s.a.mark((function n(){var i,e,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=t.user.company){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,axios.get(d,{params:{cid:i.hid,lob:!0}});case 5:e=n.sent,a=e.data,t.buildings=a,t.bldg_id?t.building=a.find((function(n){return n.hid===t.bldg_id})):t.building=a[0],t.bldgFilter=t.building.name,t.getFloors(t.building.hid,(function(){t.loaded=!0,t.wfhStat=f(),t.bldgStat=100-t.wfhStat}));case 11:case"end":return n.stop()}}),n)})))()},getFloors:function(t,n){var i=this;return u(s.a.mark((function e(){var a,r,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get(h,{params:{bid:t}});case 2:return a=e.sent,r=a.data,o=r.sort((function(t,n){return t.floor_no>n.floor_no?1:t.floor_no<n.floor_no?-1:0})),i.floors=o.slice(0),e.abrupt("return",n&&n());case 7:case"end":return e.stop()}}),e)})))()},filterSelect:function(t,n){var i=this;this.showFilter=!1,this.building=this.buildings.find((function(n){return n.hid===t})),this.bldgFilter=n,this.getFloors(this.building.hid,(function(){i.wfhStat=f(),i.bldgStat=100-i.wfhStat}))},toCostAnalysis:function(){this.$router.push({name:"cost-analysis"})},rangeSelect:function(t,n,i){},timeStartChange:function(t){this.timeFilter.start=t},timeEndChange:function(t){this.timeFilter.end=t},filterMinute:function(t){var n=this.minuteFilters.find((function(n){return n.value==t}));this.showMinuteFilter=!1,this.minuteFilter=n.label},toggleEmbed:function(t){t&&(this.showPageOpts=!1),this.showEmbed=t}},created:function(){this.user=a.a.getUser()},mounted:function(){this.getBuildings()}},g=(i(100),i(3)),v=Object(g.a)(p,(function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"content"},[t.loaded&&t.building?[i("div",{staticClass:"graph-header"},[i("date-range-toggle",{on:{select:t.rangeSelect}}),t._v(" "),i("div",{staticClass:"graph-filters"},[i("span",{staticClass:"graph-filter",on:{click:function(n){t.showFilter=!t.showFilter}}},[t._v("\n                    "+t._s(t.bldgFilter?t.bldgFilter:"Select Building")+"\n                    "),i("span",{staticClass:"caret"},[i("caret-icon")],1),t._v(" "),i("filter-dropdown",{attrs:{filters:t.buildingFilters,show:t.showFilter},on:{onSelect:t.filterSelect}})],1),t._v(" "),i("a",{staticClass:"btn btn-primary ml-12",attrs:{href:"javascript:;"},on:{click:t.toCostAnalysis}},[t._v("Cost Analysis")])]),t._v(" "),i("span",{staticClass:"page-opt-trigger",attrs:{role:"button"},on:{click:function(n){t.showPageOpts=!t.showPageOpts}}},[i("span",{staticClass:"dot"}),t._v(" "),i("span",{staticClass:"dot"}),t._v(" "),i("span",{staticClass:"dot"})]),t._v(" "),i("transition",{attrs:{name:"fadeUp"}},[t.showPageOpts?i("div",{staticClass:"page-opt-panel"},[i("ul",[i("li",[i("a",{on:{click:function(n){return t.toggleEmbed(!0)}}},[t._v("Embed")])])])]):t._e()])],1),t._v(" "),i("div",{staticClass:"graph-content"},[i("div",{staticClass:"page-back"},[i("div",{staticClass:"back-button",on:{click:t.backTo}},[i("button",{staticClass:"btn btn-primary btn-small"},[i("caret-left-icon")],1),t._v("\n                    Back\n                ")])]),t._v(" "),i("div",{staticClass:"chart-header"},[i("span",{staticClass:"chart-title"},[t._v(t._s("Work From Home - "+t.building.name))])]),t._v(" "),i("div",{attrs:{id:"wfh-content"}},[i("div",{attrs:{id:"house-wrapper"}},[i("house-svg",{style:{transform:"scale("+t.homeScale+")"}}),t._v(" "),i("span",{staticClass:"stat"},[t._v(t._s(t.wfhStat+"%"))])],1),t._v(" "),i("div",{attrs:{id:"building-wrapper"}},[i("building-svg",{style:{transform:"scale("+t.bldgScale+")"},attrs:{floors:t.floors}}),t._v(" "),i("span",{staticClass:"stat"},[t._v(t._s(t.bldgStat+"%"))])],1)]),t._v(" "),i("div",{staticClass:"bottom-filters"},[i("time-slider",{attrs:{from:t.settings?t.settings.start_time:null,to:t.settings?t.settings.end_time:null},on:{startChanged:t.timeStartChange,endChanged:t.timeEndChange}}),t._v(" "),i("span",{staticClass:"graph-filter",on:{click:function(n){t.showMinuteFilter=!t.showMinuteFilter}}},[t._v("\n                    "+t._s(t.minuteFilter?t.minuteFilter:"Select")+"\n                    "),i("span",{staticClass:"caret"},[i("caret-icon")],1),t._v(" "),i("filter-dropdown",{attrs:{filters:t.minuteFilters,position:"top",show:t.showMinuteFilter},on:{onSelect:t.filterMinute}})],1)],1)]),t._v(" "),i("div",{staticClass:"graph-footer"},[i("div",{staticClass:"left-options"}),t._v(" "),i("div",{staticClass:"right-options"},[i("checkbox",{attrs:{label:"Save to report"}})],1)])]:t._e(),t._v(" "),i("loader",{attrs:{show:!t.loaded,type:"ripple"}})],2)}),[],!1,null,"2175c8cd",null);n.default=v.exports},25:function(t,n,i){var e=i(101);"string"==typeof e&&(e=[[t.i,e,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};i(8)(e,s);e.locals&&(t.exports=e.locals)}}]);