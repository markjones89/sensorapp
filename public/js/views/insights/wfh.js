(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{123:function(t,e,n){"use strict";n(50)},124:function(t,e,n){(t.exports=n(6)(!1)).push([t.i,"#wfh-content[data-v-abc9e9c6]{position:relative}#wfh-content .stat[data-v-abc9e9c6]{position:absolute;font-weight:700;font-size:16px;text-align:center;min-width:48px;line-height:48px;border-radius:50%;bottom:16px;background-color:#ff5a09}#wfh-content #house-wrapper[data-v-abc9e9c6]{position:relative;display:inline-block;padding:0 0 32px}#wfh-content #house-wrapper .house-svg[data-v-abc9e9c6]{transform-origin:bottom;transition:transform .4s}#wfh-content #house-wrapper .stat[data-v-abc9e9c6]{margin-left:90px}#wfh-content #building-wrapper[data-v-abc9e9c6]{position:relative;display:inline-block;padding:0 0 32px}#wfh-content #building-wrapper .building-svg[data-v-abc9e9c6]{transform-origin:bottom;transition:transform .4s}#wfh-content #building-wrapper .stat[data-v-abc9e9c6]{margin-left:120px}",""])},296:function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),a=n(5),s=n(8),o=n(4),l=n(20);function c(t,e,n,i,r,a,s){try{var o=t[a](s),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(i,r)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var a=t.apply(e,n);function s(t){c(a,i,r,s,o,"next",t)}function o(t){c(a,i,r,s,o,"throw",t)}s(void 0)}))}}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b(){return Math.floor(100*Math.random()+1)}var g={title:"Work From Home",components:{BuildingSvg:l.a,CaretIcon:s.a,CaretLeftIcon:s.b,Checkbox:o.a,DateRangeToggle:o.c,FilterDropdown:o.d,HouseSvg:l.b,Loader:o.f,TimeSlider:o.i},data:function(){return{loaded:!1,showPageOpts:!1,showEmbed:!1,showFilter:!1,buildings:[],floors:[],building:null,bldgFilter:null,wfhStat:0,bldgStat:0,timeFilter:{start:null,end:null},minuteFilter:"10 minutes",showMinuteFilter:!1}},computed:f(f(f({},Object(a.d)({user:function(t){return t.user},filter:function(t){return t.homepage.filter}})),Object(a.b)({api_header:"backend/api_header",api_customers:"backend/api_customers",api_buildings:"backend/api_buildings",api_floors:"backend/api_floors"})),{},{settings:function(){return this.user.company?this.user.company.settings:null},buildingFilters:function(){return this.buildings.map((function(t){return{value:t.id,label:t.name}}))},homeScale:function(){return(this.wfhStat<25?25:this.wfhStat)/100},bldgScale:function(){return(this.bldgStat<25?25:this.bldgStat)/100},minuteFilters:function(){return[10,15,30,45,60,120,240,480].map((function(t){return{value:t,label:"".concat(t," minutes")}}))}}),methods:{backTo:function(){this.$router.back()},getBuildings:function(){var t=this;return u(r.a.mark((function e(){var n,i,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.user.company_id,e.next=3,axios.get(t.api_buildings(n),t.api_header());case 3:return i=e.sent,a=i.data,t.buildings=a,t.bldg_id?t.building=a.find((function(e){return e.id===t.bldg_id})):t.building=a[0],t.bldgFilter=t.building.name,e.next=10,t.getFloors(t.building.id);case 10:t.loaded=!0,t.wfhStat=b(),t.bldgStat=100-t.wfhStat;case 13:case"end":return e.stop()}}),e)})))()},getFloors:function(t){var e=this;return u(r.a.mark((function n(){var i,a,s,o;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.user.company_id,n.next=3,axios.get(e.api_floors(i,t),e.api_header());case 3:a=n.sent,s=a.data,o=s.sort((function(t,e){return t.number>e.number?1:t.number<e.number?-1:0})),e.floors=o.slice(0);case 7:case"end":return n.stop()}}),n)})))()},filterSelect:function(t,e){var n=this;return u(r.a.mark((function i(){return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n.showFilter=!1,n.building=n.buildings.find((function(e){return e.id===t})),n.bldgFilter=e,i.next=5,n.getFloors(n.building.id);case 5:n.wfhStat=b(),n.bldgStat=100-n.wfhStat;case 7:case"end":return i.stop()}}),i)})))()},toTreeSummary:function(){this.$router.push({name:"tree-summary",query:{df:this.filter.value}})},rangeSelect:function(t,e,n){},timeStartChange:function(t){this.timeFilter.start=t},timeEndChange:function(t){this.timeFilter.end=t},filterMinute:function(t){var e=this.minuteFilters.find((function(e){return e.value==t}));this.showMinuteFilter=!1,this.minuteFilter=e.label},toggleEmbed:function(t){t&&(this.showPageOpts=!1),this.showEmbed=t}},mounted:function(){this.getBuildings()}},h=(n(123),n(3)),v=Object(h.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[t.loaded&&t.building?[n("div",{staticClass:"graph-header"},[n("date-range-toggle",{on:{select:t.rangeSelect}}),t._v(" "),n("div",{staticClass:"graph-filters"},[n("span",{staticClass:"graph-filter",on:{click:function(e){t.showFilter=!t.showFilter}}},[t._v("\n                    "+t._s(t.bldgFilter?t.bldgFilter:"Select Building")+"\n                    "),n("span",{staticClass:"caret"},[n("caret-icon")],1),t._v(" "),n("filter-dropdown",{attrs:{filters:t.buildingFilters,show:t.showFilter},on:{onSelect:t.filterSelect}})],1),t._v(" "),n("a",{staticClass:"btn btn-primary ml-12",attrs:{href:"javascript:;"},on:{click:t.toTreeSummary}},[t._v(t._s(t.filter.btnLabel))])]),t._v(" "),n("span",{staticClass:"page-opt-trigger",attrs:{role:"button"},on:{click:function(e){t.showPageOpts=!t.showPageOpts}}},[n("span",{staticClass:"dot"}),t._v(" "),n("span",{staticClass:"dot"}),t._v(" "),n("span",{staticClass:"dot"})]),t._v(" "),n("transition",{attrs:{name:"fadeUp"}},[t.showPageOpts?n("div",{staticClass:"page-opt-panel"},[n("ul",[n("li",[n("a",{on:{click:function(e){return t.toggleEmbed(!0)}}},[t._v("Embed")])])])]):t._e()])],1),t._v(" "),n("div",{staticClass:"graph-content"},[n("div",{staticClass:"page-back"},[n("div",{staticClass:"back-button",on:{click:t.backTo}},[n("button",{staticClass:"btn btn-primary btn-small"},[n("caret-left-icon")],1),t._v("\n                    Back\n                ")])]),t._v(" "),n("div",{staticClass:"chart-header"},[n("span",{staticClass:"chart-title"},[t._v(t._s("Work From Home - "+t.building.name))])]),t._v(" "),n("div",{attrs:{id:"wfh-content"}},[n("div",{attrs:{id:"house-wrapper"}},[n("house-svg",{style:{transform:"scale("+t.homeScale+")"}}),t._v(" "),n("span",{staticClass:"stat"},[t._v(t._s(t.wfhStat+"%"))])],1),t._v(" "),n("div",{attrs:{id:"building-wrapper"}},[n("building-svg",{style:{transform:"scale("+t.bldgScale+")"},attrs:{floors:t.floors}}),t._v(" "),n("span",{staticClass:"stat"},[t._v(t._s(t.bldgStat+"%"))])],1)]),t._v(" "),n("div",{staticClass:"bottom-filters"},[n("time-slider",{attrs:{from:t.settings?t.settings.start_time:null,to:t.settings?t.settings.end_time:null},on:{startChanged:t.timeStartChange,endChanged:t.timeEndChange}}),t._v(" "),n("span",{staticClass:"graph-filter",on:{click:function(e){t.showMinuteFilter=!t.showMinuteFilter}}},[t._v("\n                    "+t._s(t.minuteFilter?t.minuteFilter:"Select")+"\n                    "),n("span",{staticClass:"caret"},[n("caret-icon")],1),t._v(" "),n("filter-dropdown",{attrs:{filters:t.minuteFilters,position:"top",show:t.showMinuteFilter},on:{onSelect:t.filterMinute}})],1)],1)]),t._v(" "),n("div",{staticClass:"graph-footer"},[n("div",{staticClass:"left-options"}),t._v(" "),n("div",{staticClass:"right-options"},[n("checkbox",{attrs:{label:"Save to report"}})],1)])]:t._e(),t._v(" "),n("loader",{attrs:{show:!t.loaded,type:"ripple"}})],2)}),[],!1,null,"abc9e9c6",null);e.default=v.exports},50:function(t,e,n){var i=n(124);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(7)(i,r);i.locals&&(t.exports=i.locals)}}]);