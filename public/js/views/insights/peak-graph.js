(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{100:function(t,e,n){"use strict";n(41)},101:function(t,e,n){(t.exports=n(7)(!1)).push([t.i,".hierarchy-chart{pointer-events:auto;transition:height .75s}",""])},251:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(5),o=n(3),c=n(2),s=n(6),l=n(1);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e,n){var r=l.y(t),a=Object(o.c)({},n).events,i=function t(e){if(e.value)return e;var n=e.children.map(t);return f(f({},e),{},{children:n,value:Math.floor(n.reduce((function(t,e){return t+e.value}),0)/n.length)})}(e),c=l.l(i).eachAfter((function(t){return t.index=t.parent?t.parent.index=t.parent.index+1||0:0})),s=l.x([!0,!1],["#FF5A09","#953100"]),u=30,p=30,h=0,d=215,v=150+u+h,g=m(c),b=l.w().domain([0,100]).range([d,950-p]);function m(t){return 30*t.children.length+u+h}function y(t,e,n,r){var a=n,i=n.children.reduce((function(t,e){return t+e.value}),0),o=t.insert("g",r).attr("class","enter").attr("transform","translate(0,".concat(u+3,")")).attr("text-anchor","end").style("font","10px sans-serif"),c=o.selectAll("g").data(n.children).join("g").attr("cursor",(function(t){return t.children||t.data.route?"pointer":null})).on("click",(function(n){return e(t,n)}));return c.append("text").attr("x",d-6).attr("y",13.5).attr("dy",".35em").attr("fill","currentColor").text((function(t){return t.data.name})),c.append("rect").attr("x",b(0)).attr("ry",13.5).attr("rx",13.5).attr("width",(function(t){return b(a.value*(t.value/i))-b(0)})).attr("height",27),o}function w(t,e,n){var r=0;return function(a){var i="translate(".concat(b(r/e*n)-b(0),",").concat(30*t,")");return r+=a.value,i}}function O(t,e){var n=0;return function(r,a){var i="translate(".concat(b(n/t*e)-b(0),",").concat(30*a,")");return n+=r.value,i}}function C(t,e){if(e.data.route)return a&&a.routeTo.call(e,e.data.route);if(e.children&&!l.a(t.node())){t.select(".background").datum(e),j(e);var n=e.children.reduce((function(t,e){return t+e.value}),0),r=t.transition().duration(750),i=r.transition(),o=t.selectAll(".enter").attr("class","exit");o.selectAll("rect").attr("fill-opacity",(function(t){return t===e?0:null})),o.transition(r).attr("fill-opacity",0).remove();var c=y(t,C,e,".y-axis").attr("fill-opacity",0);c.transition(r).attr("fill-opacity",1),c.selectAll("g").attr("transform",w(e.index,n,e.value)).transition(r).attr("transform",O(n,e.value)),c.selectAll("g").transition(i).attr("transform",(function(t,e){return"translate(0,".concat(30*e,")")})),c.selectAll("rect").attr("fill",s(!0)).attr("fill-opacity",1).transition(i).attr("fill",(function(t){return s(!!t.children)})).attr("width",(function(t){return b(t.value)-b(0)}))}}var k=r.append("svg").attr("class","hierarchy-chart").attr("width",950).attr("height",g),_=k.append("rect").attr("class","background").attr("fill","none").attr("pointer-events","all").attr("width",950).attr("height",g).attr("cursor","pointer").on("click",(function(t){return function(t,e){if(e.parent&&t.selectAll(".exit").empty()){t.select(".background").datum(e.parent),j(e.parent);var n=e,r=e.children.reduce((function(t,e){return t+e.value}),0),i=t.transition().duration(750),o=i.transition(),c=t.selectAll(".enter").attr("class","exit");c.selectAll("g").transition(i).attr("transform",O(r,e.value)),c.selectAll("g").transition(o).attr("transform",w(e.index,r,e.value)),c.selectAll("rect").transition(i).attr("width",(function(t){return b(n.value*(t.value/r))-b(0)})).attr("fill",s(!0)),c.transition(o).attr("fill-opacity",0).remove();var u=y(t,C,e.parent,".exit").attr("fill-opacity",0);u.selectAll("g").attr("transform",(function(t,e){return"translate(0,".concat(30*e,")")})),u.transition(o).attr("fill-opacity",1),u.selectAll("rect").attr("fill",(function(t){return s(!!t.children)})).attr("fill-opacity",(function(t){return t===e?0:null})).transition(o).attr("width",(function(t){return b(t.value)-b(0)})).on("end",(function(t){l.y(this).attr("fill-opacity",1)}))}else a&&a.goBack&&a.goBack.call(this)}(k,t)}));function j(t){(g=m(t))<v&&(g=v),k.attr("height",g),k.select(".y-axis line").transition().duration(750).attr("y2",g-h),_.transition().duration(750).attr("height",g)}return k.append("g").call((function(t){return t.attr("class","x-axis").attr("transform","translate(0,".concat(u,")")).call(l.f(b).ticks(10).tickFormat((function(t){return"".concat(t,"%")}))).call((function(t){return(t.selection?t.selection():t).select(".domain").remove()}))})),k.append("g").call((function(t){return t.attr("class","y-axis").attr("transform","translate(".concat(d+.5,",0)")).call((function(t){return t.append("line").attr("stroke","currentColor").attr("y1",u).attr("y2",g-h)}))})),C(k,c),k.node()}function d(t,e,n,r,a,i,o){try{var c=t[i](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m={title:"Peak Chart",components:{CaretIcon:s.a,CaretLeftIcon:s.b,Checkbox:c.a,DateRangeToggle:c.c,FilterDropdown:c.d,Modal:c.h,TimeSlider:c.i},data:function(){return{showPageOpts:!1,showEmbed:!1,timeFilter:{start:null,end:null},minuteFilter:"10 minutes",showMinuteFilter:!1}},computed:g(g({},Object(i.e)({user:function(t){return t.user}})),{},{baseUrl:function(){return Object(o.d)()},settings:function(){return this.user.company?this.user.company.settings:null},minuteFilters:function(){return[10,15,30,45,60,120,240,480].map((function(t){return{value:t,label:"".concat(t," minutes")}}))}}),methods:{backTo:function(){this.$router.back()},rangeSelect:function(t,e,n){console.log("rangeSelect",t,e,n)},toggleEmbed:function(t){t&&(this.showPageOpts=!1),this.showEmbed=t},renderChart:function(){var t,e=this;return(t=a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:fetch("".concat(e.baseUrl,"/data/detail-breakdown.json")).then((function(t){return t.json()})).then((function(t){h("#peak-chart",t,{events:{goBack:function(){e.$router.back()},routeTo:function(t){e.$router.push({name:t})}}})}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var i=t.apply(e,n);function o(t){d(i,r,a,o,c,"next",t)}function c(t){d(i,r,a,o,c,"throw",t)}o(void 0)}))})()},timeStartChange:function(t){this.timeFilter.start=t},timeEndChange:function(t){this.timeFilter.end=t},filterMinute:function(t){var e=this.minuteFilters.find((function(e){return e.value==t}));this.showMinuteFilter=!1,this.minuteFilter=e.label},viewCostAnalysis:function(){this.$router.push({name:"cost-analysis"})},toLive:function(){this.$router.push({name:"occupancy"})}},mounted:function(){this.renderChart()}},y=(n(100),n(4)),w=Object(y.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"graph-header"},[n("date-range-toggle",{on:{select:t.rangeSelect}}),t._v(" "),n("div",{staticClass:"graph-filters"},[n("span",{staticClass:"graph-filter"},[t._v("\n                Select Location\n                "),n("span",{staticClass:"caret"},[n("caret-icon")],1)]),t._v(" "),n("a",{staticClass:"btn btn-primary ml-12",attrs:{href:"javascript:;"},on:{click:t.viewCostAnalysis}},[t._v("Cost Analysis")])]),t._v(" "),n("span",{staticClass:"page-opt-trigger",attrs:{role:"button"},on:{click:function(e){t.showPageOpts=!t.showPageOpts}}},[n("span",{staticClass:"dot"}),t._v(" "),n("span",{staticClass:"dot"}),t._v(" "),n("span",{staticClass:"dot"})]),t._v(" "),n("transition",{attrs:{name:"fadeUp"}},[t.showPageOpts?n("div",{staticClass:"page-opt-panel"},[n("ul",[n("li",[n("a",{on:{click:function(e){return t.toggleEmbed(!0)}}},[t._v("Embed")])])])]):t._e()])],1),t._v(" "),n("div",{staticClass:"graph-content"},[n("div",{staticClass:"page-back"},[n("div",{staticClass:"back-button",on:{click:t.backTo}},[n("button",{staticClass:"btn btn-primary btn-small"},[n("caret-left-icon")],1),t._v("\n                Back\n            ")])]),t._v(" "),t._m(0),t._v(" "),n("div",{attrs:{id:"peak-chart"}}),t._v(" "),n("div",{staticClass:"bottom-filters"},[n("time-slider",{attrs:{from:t.settings?t.settings.start_time:null,to:t.settings?t.settings.end_time:null},on:{startChanged:t.timeStartChange,endChanged:t.timeEndChange}}),t._v(" "),n("span",{staticClass:"graph-filter",on:{click:function(e){t.showMinuteFilter=!t.showMinuteFilter}}},[t._v("\n                "+t._s(t.minuteFilter?t.minuteFilter:"Select")+"\n                "),n("span",{staticClass:"caret"},[n("caret-icon")],1),t._v(" "),n("filter-dropdown",{attrs:{filters:t.minuteFilters,position:"top",show:t.showMinuteFilter},on:{onSelect:t.filterMinute}})],1)],1)]),t._v(" "),n("div",{staticClass:"graph-footer"},[n("div",{staticClass:"left-options"},[n("button",{staticClass:"btn btn-primary btn-small",on:{click:t.toLive}},[t._v("Live")]),t._v(" "),n("button",{staticClass:"btn btn-primary btn-small"},[t._v("Insights")])]),t._v(" "),n("div",{staticClass:"right-options"},[n("checkbox",{attrs:{label:"Save to report"}})],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chart-header"},[e("span",{staticClass:"chart-title"},[this._v("Building Name")]),this._v(" "),e("span",{staticClass:"chart-subtitle"},[this._v("Click the orange bar for more info or click the blank space to go back")])])}],!1,null,null,null);e.default=w.exports},41:function(t,e,n){var r=n(101);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(8)(r,a);r.locals&&(t.exports=r.locals)}}]);