(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{13:function(t,r,a){var e=a(81);"string"==typeof e&&(e=[[t.i,e,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(8)(e,n);e.locals&&(t.exports=e.locals)},14:function(t,r,a){var e=a(83);"string"==typeof e&&(e=[[t.i,e,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(8)(e,n);e.locals&&(t.exports=e.locals)},207:function(t,r,a){"use strict";a.r(r);var e=a(4),n=a(5),o=a(2),i=a(6),s=a(43),c={title:"Time Chart",components:{CaretIcon:i.a,CaretLeftIcon:i.b,Checkbox:o.b,DateRangeToggle:o.d,Modal:o.h,TimeSlider:o.i},data:function(){return{user:null,showPageOpts:!1,showEmbed:!1,timeFilter:{start:null,end:null}}},computed:{baseUrl:function(){return Object(n.b)()},settings:function(){return this.user.company?this.user.company.settings:null}},methods:{backTo:function(){this.$router.back()},rangeSelect:function(t,r,a){console.log("rangeSelect",t,r,a)},toggleEmbed:function(t){t&&(this.showPageOpts=!1),this.showEmbed=t},timeStartChange:function(t){this.timeFilter.start=t},timeEndChange:function(t){this.timeFilter.end=t},viewCostAnalysis:function(){this.$router.push({name:"cost-analysis"})},toLive:function(){this.$router.push({name:"live"})}},created:function(){this.user=e.a.getUser()},mounted:function(){var t=this;Object(s.a)("#time-chart","".concat(this.baseUrl,"/data/time-chart-data.json"),!1,{toPeakChart:function(r){console.log("toPeakChart",r),t.$router.push({name:"peak"})}})}},l=(a(80),a(82),a(3)),d=Object(l.a)(c,(function(){var t=this,r=t.$createElement,a=t._self._c||r;return a("div",{staticClass:"content"},[a("div",{staticClass:"graph-header"},[a("date-range-toggle",{on:{select:t.rangeSelect}}),t._v(" "),a("div",{staticClass:"graph-filters"},[a("span",{staticClass:"graph-filter"},[t._v("\n                Filter By\n                "),a("span",{staticClass:"caret"},[a("caret-icon")],1)]),t._v(" "),a("span",{staticClass:"graph-filter"},[t._v("\n                Select Location\n                "),a("span",{staticClass:"caret"},[a("caret-icon")],1)]),t._v(" "),a("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;",id:"cost-analysis-btn"},on:{click:t.viewCostAnalysis}},[t._v("Cost Analysis")])]),t._v(" "),a("span",{staticClass:"page-opt-trigger",attrs:{role:"button"},on:{click:function(r){t.showPageOpts=!t.showPageOpts}}},[a("span",{staticClass:"dot"}),t._v(" "),a("span",{staticClass:"dot"}),t._v(" "),a("span",{staticClass:"dot"})]),t._v(" "),a("transition",{attrs:{name:"fadeUp"}},[t.showPageOpts?a("div",{staticClass:"page-opt-panel"},[a("ul",[a("li",[a("a",{on:{click:function(r){return t.toggleEmbed(!0)}}},[t._v("Embed")])])])]):t._e()])],1),t._v(" "),a("div",{staticClass:"graph-content"},[a("div",{staticClass:"page-back"},[a("div",{staticClass:"back-button",on:{click:t.backTo}},[a("button",{staticClass:"btn btn-primary btn-small"},[a("caret-left-icon")],1),t._v("\n                Back\n            ")])]),t._v(" "),a("div",{attrs:{id:"time-chart"}}),t._v(" "),a("time-slider",{attrs:{from:t.settings?t.settings.start_time:null,to:t.settings?t.settings.end_time:null},on:{startChanged:t.timeStartChange,endChanged:t.timeEndChange}}),t._v(" "),a("div",{staticClass:"clearfix"})],1),t._v(" "),a("div",{staticClass:"graph-footer"},[a("div",{staticClass:"left-options"},[a("button",{staticClass:"btn btn-primary btn-small",on:{click:t.toLive}},[t._v("Live")])]),t._v(" "),a("div",{staticClass:"right-options"},[a("checkbox",{attrs:{label:"Save to report"}})],1)])])}),[],!1,null,"f9de08d4",null);r.default=d.exports},43:function(t,r,a){"use strict";a.d(r,"a",(function(){return n}));var e=a(0);function n(t,r,a,n){var o,i=e.t(t),s=0,c=i.node().getBoundingClientRect().width-(a?0:17),l=i.node().getBoundingClientRect().height||600,d=.4*c,u=l/2,h=l/3,p=h+12,f=.75*h*2;function m(t){return Math.PI/180*t}function g(t){var r,a,e=t.sum(),n=[],o=t.length;for(a=0;a<o;a++)r=100*t[a]/e,n.push(r>=0?r:0);return n}Array.prototype.sum=function(t){var r,a=0,e=this.length;for(r=0;r<e;r++)if("number"==typeof this[r]){if(t&&this[r]<0)continue;a+=this[r]}return a};var y=e.u({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),v=e.w("%Y-%m-%dT%H:%M:%S.%LZ"),b=y.format("%A %d, %H:%M"),x=["eol","hid","sol","aut","gf","nuc","car","cc"],C={eol:{id:"eol",nombre:"Wind",nombreAbrev:"Wind",color:"7EAADD",highlightColor:"c6d1dd",icon:"\\e82b"},hid:{id:"hid",nombre:"Hydroelectric",nombreAbrev:"Hydroelectric",color:"33537A",highlightColor:"446fa4",icon:"\\e82d"},sol:{id:"sol",nombre:"Solar/Solar Thermal",nombreAbrev:"Solar/S.Thermal",color:"F5A623",highlightColor:"f5cc89",icon:"\\e82c"},aut:{id:"aut",nombre:"Special Scheme",nombreAbrev:"Special S.",color:"9B9B9B",highlightColor:"bdbdbd",icon:"\\e800"},gf:{id:"gf",nombre:"Gas + Fuel",nombreAbrev:"Gas+Fuel",color:"6F93A4",highlightColor:"96C6DD",icon:"\\e806"},nuc:{id:"nuc",nombre:"Nuclear",nombreAbrev:"Nuclear",color:"BD10E0",highlightColor:"d712ff",icon:"\\e807"},car:{id:"car",nombre:"Coal",nombreAbrev:"Coal",color:"583636",highlightColor:"795d5d",icon:"\\e805"},cc:{id:"cc",nombre:"Combined Cycle",nombreAbrev:"Combined C.",color:"3D4163",highlightColor:"686fa9",icon:"\\e804"}},k={eol:{med24h:0,percent24h:[]},hid:{med24h:0,percent24h:[]},sol:{med24h:0,percent24h:[]},aut:{med24h:0,percent24h:[]},gf:{med24h:0,percent24h:[]},nuc:{med24h:0,percent24h:[]},car:{med24h:0,percent24h:[]},cc:{med24h:0,percent24h:[]}},M={dem:!0,icb:!0,inter:!0,car:!0,aut:!0,sol:!0,cc:!0,hid:!0,gf:!0,nuc:!0,eol:!0,ts:!0},_=i.append("svg").attr("class","time-chart").attr("width",c).attr("height",l),w=_.append("defs").append("filter").attr("id","brightness").append("feComponentTransfer");w.append("feFuncR").attr("type","linear").attr("slope","1.25"),w.append("feFuncG").attr("type","linear").attr("slope","1.25"),w.append("feFuncB").attr("type","linear").attr("slope","1.25"),_.append("g").attr("id","base"),_.append("circle").attr("id","circleBG").attr("r",h).attr("cx",d).attr("cy",u).attr("fill","#222222"),_.append("g").attr("id","horas");_.append("g").attr("id","hostRads");var A,S,B=_.append("g").attr("id","consumo"),D=B.append("circle").attr("r",h).attr("cx",d).attr("cy",u).attr("stroke","#990000").attr("fill","none").attr("stroke-dasharray",3).attr("stroke-width",2).attr("stroke-opacity",0),T=_.append("g").attr("id","consumo-dot"),F=T.append("circle").attr("r",5).attr("cx",-9999).attr("cy",-9999).attr("stroke","none").attr("fill","#900"),H=e.t("svg #horas").attr("transform","translate("+d+","+u+")"),P=e.r().domain([0,1440]).range([0,360]),j=new Date,E=P(60*j.getHours()+j.getMinutes()),O=_.append("circle").attr("id","circleHour").attr("r",3).attr("cx",d+(h+12)*Math.sin(m(540-E))).attr("cy",u+(h+12)*Math.cos(m(540-E))).attr("stroke-width","2").attr("stroke","#BCD5D5").attr("fill","#BCD5D5");setInterval((function(){var t=new Date,r=m(540-P(60*t.getHours()+t.getMinutes()));O.transition().attr("cx",d+p*Math.sin(r)).attr("cy",u+p*Math.cos(r)).attr("r",(function(){return 3!=O.attr("r")?3:1}))}),1e3);for(S=0;S<24;S++)A=180-15*S,H.append("text").text((S>9?S:"0"+S)+":00").attr("x",(h+33)*Math.sin(m(A))).attr("y",(h+33)*Math.cos(m(A))+7).attr("text-anchor","middle").style("font-size","14").style("fill","#666");var R=_.append("g").attr("id","desglose_grupo").attr("transform","translate("+(d+h+100)+","+(u-.75*h)+")").attr("opacity",0);R.append("rect").attr("y",f+20).attr("width",165).attr("height",3).attr("fill","#3C3C3C");var z,J=R.append("text").text("hoy").attr("y",f+39).attr("text-anchor","start").style("font-size","14").attr("fill","#666"),W=R.append("text").text("21:00h").attr("y",f+62).attr("text-anchor","start").style("font-size","27").attr("fill","#666"),L=R.append("g"),I=L.append("rect").attr("x",-8).attr("width",2).attr("height",200).attr("fill","#669C83"),$=L.append("text").text("--").attr("text-anchor","middle").style("font-size","13").attr("fill","#669C83").attr("x",-100).attr("y",-12).attr("transform","rotate(-90)"),G=_.append("g").attr("id","dem-tooltip").attr("opacity",0),N=G.append("rect").attr("width",124).attr("height",32).attr("rx",10).attr("fill","black").attr("fill-opacity",.15),U=G.append("rect").attr("width",120).attr("height",28).attr("rx",10),q=G.append("text").attr("id","fecha").attr("x",5).attr("y",11).attr("text-anchor","start").style("font-size","11").style("fill","black").style("fill-opacity",.75),Y=G.append("text").text("").attr("x",15).attr("y",24).style("font-size","13").style("fill","white");function X(t){return+t.dem}_.on("mousemove",(function(t,r){var a,n=e.p(this),i=n[0],c=n[1],l=Math,p=l.pow(d-i,2),f=l.pow(u-c,2),m=l.sqrt(p+f),g=(_.offsetLeft,_.offsetTop,["fmt_",i>d?1:0,"_",c>u?1:0].join(""));g!=z&&("fmt_0_0"==(a=g)&&(N.attr("x",-122).attr("y",-30),U.attr("x",-120).attr("y",-28),q.attr("x",-4).attr("y",-16).attr("text-anchor","end"),Y.attr("x",-4).attr("y",-4).attr("text-anchor","end")),"fmt_1_0"==a&&(N.attr("x",-2).attr("y",-30),U.attr("x",0).attr("y",-28),q.attr("x",5).attr("y",-16).attr("text-anchor","start"),Y.attr("x",5).attr("y",-4).attr("text-anchor","start")),"fmt_1_1"==a&&(N.attr("x",-2).attr("y",-2),U.attr("x",0).attr("y",0),q.attr("x",5).attr("y",11).attr("text-anchor","start"),Y.attr("x",5).attr("y",24).attr("text-anchor","start")),"fmt_0_1"==a&&(N.attr("x",-122).attr("y",-2),U.attr("x",-120).attr("y",0),q.attr("x",-4).attr("y",11).attr("text-anchor","end"),Y.attr("x",-4).attr("y",24).attr("text-anchor","end")),z=g),s!=+(m<=h)&&(s=+(m<=h),B.transition().duration(100).style("opacity",s),T.transition().duration(100).style("opacity",s),G.transition().duration(100).style("opacity",s),s||ot.call("mouseenter",this,o))}));var Z,K,Q,V,tt,rt=e.r().range([10,24]),at=e.r().range([.4,1]),et=e.r().range(["#996A00","#990000"]),nt=e.r().range([0,h]),ot=e.d("mouseenter");function it(t){var r,a,o,i=[t.eol,t.hid,t.sol,t.aut,t.gf,t.nuc,t.car,t.cc],s=g(i),c=i.sum(!0),l=0,d=0,u=(s.length,v(t.ts)),h=(u.getHours(),u.getMinutes(),a=c,[t.eol,t.hid,t.sol].sum(!0)*(o||100)/+a);R.attr("opacity",1),$.text("Renewable "+e.g(",.2f")(h)+"% ").transition().attr("x",-f/100*h/2),I.transition().attr("height",f/100*h),J.text(y.format("%A %d")(u)),W.text(y.format("%H:%M")(u)+"h");e.r().range([0,f]);var p=[];for(r=0;r<x.length;r++)p[r]={id:x[r],datos:t[x[r]]};var m=R.selectAll(".j-bloque").data(p,(function(t,r){return t.id}));m.enter().append("g").attr("id",(function(t,r){return"des_"+t.id})).attr("class","j-bloque").each((function(){var t=this,r=e.t(this);r.append("rect").attr("width",6).attr("height",10).style("cursor","pointer").attr("fill",(function(t){return"#"+C[t.id].color})).on("click",(function(r){return n&&(n.toPeakChart.call(t,r),e.f.stopPropagation())})),r.append("text").text((function(t){return C[t.id].id})).attr("class","j-nombre").attr("x",30).attr("y",20).attr("text-anchor","start").style("font-size","13").style("cursor","pointer").style("fill","#B3B3B3").style("fill",(function(t){return"#"+C[t.id].highlightColor})).attr("transform","rotate(-45)").on("click",(function(r){return n&&(n.toPeakChart.call(t,r),e.f.stopPropagation())})),r.append("text").text((function(t){return C[t.id].id})).attr("class","j-MW").attr("x",30).attr("y",32).attr("text-anchor","start").style("font-size","12").style("cursor","pointer").style("fill","#B3B3B3").style("fill",(function(t){return"#"+C[t.id].highlightColor})).attr("transform","rotate(-45)").on("click",(function(r){return n&&(n.toPeakChart.call(t,r),e.f.stopPropagation())})),r.append("path").style("fill","none").style("stroke-width","1").style("stroke",(function(t){return"#"+C[t.id].color}))})).attr("transform",(function(t,r){return"translate(0,"+50*r+")"}));var b=0,k=0;m.each((function(t,r){s[r-1]<8&&k++,b=33*k,d=s[r]/100*f;e.t(this).transition().attr("transform","translate(0,"+l+")").each((function(){var t=e.t(this);t.select("rect").transition().attr("height",d),t.select(".j-nombre").text((function(t){return C[t.id].nombreAbrev+" "})).transition().attr("transform","translate("+b+",0) rotate(-45 0 0) "),t.select(".j-MW").text((function(t){return e.g(",.2f")(s[r])+"% "+e.g(",")(t.datos)+"MW "})).transition().attr("transform","translate("+b+",0) rotate(-45 0 0) "),t.select("path").transition().attr("d","M6,1 H"+Math.floor(31+b)+" l3,-3")}));l+=d}))}ot.on("mouseenter",(Z=it,K=125,function(){var t=this,r=arguments,a=function(){V=null,Q||Z.apply(t,r)},e=Q&&!V;clearTimeout(V),V=setTimeout(a,K),e&&Z.apply(t,r)})),tt=r,e.k(tt).then((function(t){var r=t.map((function(t){var r,a={};for(r in t)M[r]&&(a[r]=t[r]);return a}));r.reverse();var a=e.m(r,X),n=e.o(r,X);for(var i in k)k[i].percent24h=[],k[i].med24h=0;for(var i in r.forEach((function(t){var r,a,e=[],n=0;for(a in k)e.push(t[a]);for(a in r=g(e),k)k[a].percent24h.push(r[n]),n++})),k)k[i].med24h=e.n(k[i].percent24h);rt.domain([n,a]),at.domain([0,r.length]),et.domain([n,a]),nt.domain([0,a]),new Date;var c=v(r[r.length-1].ts),l=(P(60*c.getHours()+c.getMinutes()),360/r.length/1.05);s||ot.call("mouseenter",this,r[r.length-1]);var h=_.select("#hostRads").selectAll(".rad").data(r,(function(t){return t.ts}));h.enter().append("g").attr("class","rad").attr("id",(function(t){var r=v(t.ts);return["id-",r.getHours(),":",r.getMinutes(),"-dia-",r.getDate()].join("")})).on("mouseenter",(function(t){ot.call("mouseenter",this,t);var r=v(t.ts),a=r.getHours(),n=r.getMinutes(),o=m(180-P(60*a+n)),i=nt(t.dem),s=Math.sin(o),c=Math.cos(o);F.attr("cx",d+i*s).attr("cy",u+i*c).transition().duration(150).attr("fill",et(t.dem)),G.attr("transform","translate("+(d+i*s)+","+(u+i*c)+")"),q.text((function(){var r=v(t.ts);return b(r)})),Y.text((function(){return e.g(",")(t.dem)+"MW"})),U.attr("fill-opacity",1).transition().duration(150).attr("fill",et(t.dem)),D.attr("stroke-opacity",.9).transition().attr("r",nt(t.dem)).attr("stroke",et(t.dem))})).each((function(t){e.t(this).selectAll("path").data(x).enter().append("path").on("click",(function(){e.t(this)})).on("mouseover",(function(){var t=e.t(this);t.attr("fill","#"+C[t.datum()].highlightColor)})).on("mouseout",(function(){var t=e.t(this);t.attr("fill","#"+C[t.datum()].color)})).attr("fill",(function(t,r){var a=e.t(this);return"#"+C[a.datum()].color}))})).attr("opacity",0).attr("transform","translate("+d+","+u+")").each((function(t,r){var a=e.t(this).selectAll("path"),n=[t.eol,t.hid,t.sol,t.aut,t.gf,t.nuc,t.car,t.cc],o=g(n),i=(n.sum(!0),0),s=0,c=(o.length,0),d=e.b(),u=v(t.ts),h=u.getHours(),p=u.getMinutes(),f=P(60*h+p);a.each((function(){s=o[c]/100*nt(t.dem),e.t(this).attr("d",d.startAngle((function(){return m(f)})).endAngle((function(){return m(f+l)})).outerRadius((function(){return s+i})).innerRadius((function(){return i}))),i+=s,c++}))})).transition().duration(500).delay((function(t,a){return 25*(r.length-a)})).attr("opacity",(function(t,r){return at(r)})).attr("transform","translate("+d+","+u+")"),h.exit().remove(),(o=r[r.length-1])&&it(o)}))}},80:function(t,r,a){"use strict";var e=a(13);a.n(e).a},81:function(t,r,a){(t.exports=a(7)(!1)).push([t.i,".time-chart {\n  pointer-events: initial;\n}",""])},82:function(t,r,a){"use strict";var e=a(14);a.n(e).a},83:function(t,r,a){(t.exports=a(7)(!1)).push([t.i,"#cost-analysis-btn[data-v-f9de08d4] {\n  margin-left: 12px;\n}",""])}}]);