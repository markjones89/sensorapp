(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{16:function(t,a,e){var r=e(85);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};e(8)(r,n);r.locals&&(t.exports=r.locals)},17:function(t,a,e){var r=e(87);"string"==typeof r&&(r=[[t.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};e(8)(r,n);r.locals&&(t.exports=r.locals)},206:function(t,a,e){"use strict";e.r(a);var r=e(4),n=e(5),i=e(2),o=e(6),s=e(49),c={title:"Time Chart",components:{CaretIcon:o.a,CaretLeftIcon:o.b,Checkbox:i.a,DateRangeToggle:i.c,Modal:i.g,TimeSlider:i.h},data:function(){return{user:null,showPageOpts:!1,showEmbed:!1,timeGraph:null,timeFilter:{start:null,end:null}}},computed:{baseUrl:function(){return Object(n.c)()},settings:function(){return this.user.company?this.user.company.settings:null}},methods:{backTo:function(){this.$router.back()},rangeSelect:function(t,a,e){console.log("rangeSelect",t,a,e)},toggleEmbed:function(t){t&&(this.showPageOpts=!1),this.showEmbed=t},timeStartChange:function(t){this.timeFilter.start=t},timeEndChange:function(t){this.timeFilter.end=t},viewCostAnalysis:function(){this.$router.push({name:"cost-analysis"})},toLive:function(){this.$router.push({name:"occupancy"})}},created:function(){this.user=r.a.getUser()},mounted:function(){var t=this;this.timeGraph=new s.a("#time-chart","".concat(this.baseUrl,"/data/time-chart-data.json"),{widget:!1,events:{toPeakChart:function(a){console.log("toPeakChart",a),t.$router.push({name:"peak"})}}})},destroyed:function(){this.timeGraph.destroy()}},l=(e(84),e(86),e(3)),u=Object(l.a)(c,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[e("div",{staticClass:"graph-header"},[e("date-range-toggle",{on:{select:t.rangeSelect}}),t._v(" "),e("div",{staticClass:"graph-filters"},[e("span",{staticClass:"graph-filter"},[t._v("\n                Filter By\n                "),e("span",{staticClass:"caret"},[e("caret-icon")],1)]),t._v(" "),e("span",{staticClass:"graph-filter"},[t._v("\n                Select Location\n                "),e("span",{staticClass:"caret"},[e("caret-icon")],1)]),t._v(" "),e("a",{staticClass:"btn btn-primary",attrs:{href:"javascript:;",id:"cost-analysis-btn"},on:{click:t.viewCostAnalysis}},[t._v("Cost Analysis")])]),t._v(" "),e("span",{staticClass:"page-opt-trigger",attrs:{role:"button"},on:{click:function(a){t.showPageOpts=!t.showPageOpts}}},[e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"}),t._v(" "),e("span",{staticClass:"dot"})]),t._v(" "),e("transition",{attrs:{name:"fadeUp"}},[t.showPageOpts?e("div",{staticClass:"page-opt-panel"},[e("ul",[e("li",[e("a",{on:{click:function(a){return t.toggleEmbed(!0)}}},[t._v("Embed")])])])]):t._e()])],1),t._v(" "),e("div",{staticClass:"graph-content"},[e("div",{staticClass:"page-back"},[e("div",{staticClass:"back-button",on:{click:t.backTo}},[e("button",{staticClass:"btn btn-primary btn-small"},[e("caret-left-icon")],1),t._v("\n                Back\n            ")])]),t._v(" "),e("div",{attrs:{id:"time-chart"}}),t._v(" "),e("time-slider",{attrs:{from:t.settings?t.settings.start_time:null,to:t.settings?t.settings.end_time:null},on:{startChanged:t.timeStartChange,endChanged:t.timeEndChange}}),t._v(" "),e("div",{staticClass:"clearfix"})],1),t._v(" "),e("div",{staticClass:"graph-footer"},[e("div",{staticClass:"left-options"},[e("button",{staticClass:"btn btn-primary btn-small",on:{click:t.toLive}},[t._v("Live")])]),t._v(" "),e("div",{staticClass:"right-options"},[e("checkbox",{attrs:{label:"Save to report"}})],1)])])}),[],!1,null,"047172b9",null);a.default=u.exports},49:function(t,a,e){"use strict";e.d(a,"a",(function(){return i}));var r=e(0),n=e(5);function i(t,a,e){var i,o=r.y(t),s=Object(n.b)(!0,{widget:!1},e),c=s.events,l=0,u=o.node().getBoundingClientRect().width-(s.widget?0:17),d=o.node().getBoundingClientRect().height||600,h=.4*u,p=d/2,f=d/2.5,m=f+12,g=.75*f*2;function y(t){return Math.PI/180*t}function v(t){var a,e,r=t.sum(),n=[],i=t.length;for(e=0;e<i;e++)a=100*t[e]/r,n.push(a>=0?a:0);return n}Array.prototype.sum=function(t){var a,e=0,r=this.length;for(a=0;a<r;a++)if("number"==typeof this[a]){if(t&&this[a]<0)continue;e+=this[a]}return e};var b=r.A({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),_=r.C("%Y-%m-%dT%H:%M:%S.%LZ"),C=b.format("%A %d, %H:%M"),x=["wfhp","cs","pwu","pmru","pmre"],w={wfhp:{id:"wfhp",name:"Work from home peak",color:"7EAADD",highlightColor:"c6d1dd"},cs:{id:"cs",name:"Cost Saving",color:"33537A",highlightColor:"446fa4"},pwu:{id:"pwu",name:"Peak Workspace Utilisation",color:"F5A623",highlightColor:"f5cc89"},pmru:{id:"pmru",name:"Peak Meeting Room Utilisation",color:"8F31AE",highlightColor:"b662d2"},pmre:{id:"pmre",name:"Peak Meeting Room Efficiency",color:"3D3F56",highlightColor:"6a6d95"}},k=o.append("svg").attr("class","time-chart").attr("width",u).attr("height",d),M=k.append("defs").append("filter").attr("id","brightness").append("feComponentTransfer");M.append("feFuncR").attr("type","linear").attr("slope","1.25"),M.append("feFuncG").attr("type","linear").attr("slope","1.25"),M.append("feFuncB").attr("type","linear").attr("slope","1.25"),k.append("circle").attr("id","circleBG").attr("r",f).attr("cx",h).attr("cy",p).attr("fill","rgb(57,57,57)"),k.append("g").attr("id","hours");k.append("g").attr("id","hostRads");var A,P,S=k.append("g").attr("id","circle"),D=S.append("circle").attr("r",f).attr("cx",h).attr("cy",p).attr("stroke","#990000").attr("fill","none").attr("stroke-dasharray",3).attr("stroke-width",2).attr("stroke-opacity",0),T=k.append("g").attr("id","curr-time-dot"),B=T.append("circle").attr("r",5).attr("cx",-9999).attr("cy",-9999).attr("stroke","none").attr("fill","#900"),F=r.y("svg #hours").attr("transform","translate("+h+","+p+")"),j=r.w().domain([0,1440]).range([0,360]),H=new Date,E=j(60*H.getHours()+H.getMinutes()),O=k.append("circle").attr("id","circleHour").attr("r",3).attr("cx",h+(f+12)*Math.sin(y(540-E))).attr("cy",p+(f+12)*Math.cos(y(540-E))).attr("stroke-width","2").attr("stroke","#BCD5D5").attr("fill","#BCD5D5"),R=setInterval((function(){var t=new Date,a=y(540-j(60*t.getHours()+t.getMinutes()));O.transition().attr("cx",h+m*Math.sin(a)).attr("cy",p+m*Math.cos(a)).attr("r",(function(){return 3!=O.attr("r")?3:1}))}),1e3);for(P=0;P<24;P++)A=180-15*P,F.append("text").text((P>9?P:"0"+P)+":00").attr("x",(f+33)*Math.sin(y(A))).attr("y",(f+33)*Math.cos(y(A))+7).attr("text-anchor","middle").style("font-size","14").style("font-weight","bold").style("fill","#666");var J=k.append("g").attr("id","breakdown_group").attr("transform","translate("+(h+f+100)+","+(p-.75*f)+")").attr("opacity",0);J.append("rect").attr("y",g+20).attr("width",165).attr("height",3).attr("fill","#3C3C3C");var z,I=J.append("text").text("hoy").attr("y",g+39).attr("text-anchor","start").style("font-size","14").attr("fill","#666"),L=J.append("text").text("21:00h").attr("y",g+62).attr("text-anchor","start").style("font-size","27").attr("fill","#666"),U=k.append("g").attr("id","data-tooltip").attr("opacity",0),$=U.append("rect").attr("width",120).attr("height",32).attr("rx",5),G=U.append("text").attr("id","fecha").attr("x",5).attr("y",11).attr("text-anchor","start").style("font-size","11").style("fill","white").style("fill-opacity",.75),W=U.append("text").text("").attr("x",15).attr("y",24).style("font-size","13").style("fill","white");k.on("mousemove",(function(t,a){var e,n,o,s,c,u,d,m,g,y=r.s(this),v=y[0],b=y[1],_=Math,C=_.pow(h-v,2),x=_.pow(p-b,2),w=_.sqrt(C+x),M=(k.offsetLeft,k.offsetTop,["fmt_",v>h?1:0,"_",b>p?1:0].join(""));M!=z&&(n="fmt_0_0"==(e=M)||"fmt_0_1"==e?-120:0,o="fmt_0_0"==e||"fmt_1_0"==e?-32:0,s="fmt_0_0"==e||"fmt_0_1"==e?-6:6,c="fmt_0_0"==e||"fmt_1_0"==e?-18:13,u="fmt_0_0"==e||"fmt_0_1"==e?"end":"start",d="fmt_0_0"==e||"fmt_0_1"==e?-6:6,m="fmt_0_0"==e||"fmt_1_0"==e?-6:26,g="fmt_0_0"==e||"fmt_0_1"==e?"end":"start",$.attr("x",n).attr("y",o),G.attr("x",s).attr("y",c).attr("text-anchor",u),W.attr("x",d).attr("y",m).attr("text-anchor",g),z=M),l!=+(w<=f)&&(l=+(w<=f),S.transition().duration(100).style("opacity",l),T.transition().duration(100).style("opacity",l),U.transition().duration(100).style("opacity",l),l||tt.call("mouseenter",this,i))}));var Y,N,q,X,Z,K=r.w().range([.4,1]),Q=r.w().range(["#996A00","#990000"]).domain([0,100]),V=r.w().range([0,f]).domain([0,100]),tt=r.g("mouseenter");function at(t){var a,e=x.map((function(a){return t[a]})),n=v(e),i=(e.sum(!0),0),o=0,s=_(t.ts);J.attr("opacity",1),I.text(b.format("%A %d")(s)),L.text(b.format("%H:%M")(s)+"h");r.w().range([0,g]);var l=[];for(a=0;a<x.length;a++)l[a]={id:x[a],data:t[x[a]]};var u=J.selectAll(".j-block").data(l,(function(t,a){return t.id}));u.enter().append("g").attr("id",(function(t,a){return"des_"+t.id})).attr("class","j-block").each((function(){var t=this,a=r.y(this);a.append("rect").attr("width",6).attr("height",10).style("cursor","pointer").attr("fill",(function(t){return"#"+w[t.id].color})).on("click",(function(a){return c&&(c.toPeakChart.call(t,a),r.i.stopPropagation())})),a.append("text").text((function(t){return w[t.id].id})).attr("class","j-name").attr("x",30).attr("y",20).attr("text-anchor","start").style("font-size","13").style("cursor","pointer").style("fill","#B3B3B3").style("fill",(function(t){return"#"+w[t.id].highlightColor})).attr("transform","rotate(-45)").on("click",(function(a){return c&&(c.toPeakChart.call(t,a),r.i.stopPropagation())})),a.append("text").text((function(t){return w[t.id].id})).attr("class","j-data").attr("x",30).attr("y",32).attr("text-anchor","start").style("font-size","12").style("cursor","pointer").style("fill","#B3B3B3").style("fill",(function(t){return"#"+w[t.id].highlightColor})).attr("transform","rotate(-45)").on("click",(function(a){return c&&(c.toPeakChart.call(t,a),r.i.stopPropagation())})),a.append("path").style("fill","none").style("stroke-width","1").style("stroke",(function(t){return"#"+w[t.id].color}))})).attr("transform",(function(t,a){return"translate(0,"+50*a+")"}));var d=0,h=0;u.each((function(t,a){n[a-1]<8&&h++,d=33*h,o=n[a]/100*g;r.y(this).transition().attr("transform","translate(0,"+i+")").each((function(){var t=r.y(this);t.select("rect").transition().attr("height",o),t.select(".j-name").text((function(t){return w[t.id].name+" "})).transition().attr("transform","translate("+d+",0) rotate(-45 0 0) "),t.select(".j-data").text((function(t){return"".concat(t.data,"%")})).transition().attr("transform","translate("+d+",0) rotate(-45 0 0) "),t.select("path").transition().attr("d","M6,1 H"+Math.floor(31+d)+" l3,-3")}));i+=o}))}tt.on("mouseenter",(Y=at,N=125,function(){var t=this,a=arguments,e=function(){X=null,q||Y.apply(t,a)},r=q&&!X;clearTimeout(X),X=setTimeout(e,N),r&&Y.apply(t,a)})),Z=a,r.m(Z).then((function(t){var a=t.map((function(t){var a=[];for(var e in t)x.indexOf(e)>=0&&a.push(t[e]);return t.combined=r.r(a),t}));a.reverse(),K.domain([0,a.length]),new Date;var e=_(a[a.length-1].ts),n=(j(60*e.getHours()+e.getMinutes()),360/a.length/1.05);l||tt.call("mouseenter",this,a[a.length-1]);var o=k.select("#hostRads").selectAll(".rad").data(a,(function(t){return t.ts}));o.enter().append("g").attr("class","rad").attr("id",(function(t){var a=_(t.ts);return["id-",a.getHours(),":",a.getMinutes(),"-dia-",a.getDate()].join("")})).on("mouseenter",(function(t){tt.call("mouseenter",this,t);var a=_(t.ts),e=a.getHours(),n=a.getMinutes(),i=y(180-j(60*e+n)),o=V(t.combined),s=Math.sin(i),c=Math.cos(i);B.attr("cx",h+o*s).attr("cy",p+o*c).transition().duration(150).attr("fill",Q(t.combined)),U.attr("transform","translate("+(h+o*s)+","+(p+o*c)+")"),G.text((function(){var a=_(t.ts);return C(a)})),W.text("Combined: ".concat(r.k(",")(t.combined),"%")),$.attr("fill-opacity",1).transition().duration(150).attr("fill",Q(t.combined)),D.attr("stroke-opacity",.9).transition().attr("r",V(t.combined)).attr("stroke",Q(t.combined))})).each((function(t){r.y(this).selectAll("path").data(x).enter().append("path").on("mouseover",(function(){var t=r.y(this);t.attr("fill","#"+w[t.datum()].highlightColor)})).on("mouseout",(function(){var t=r.y(this);t.attr("fill","#"+w[t.datum()].color)})).attr("fill",(function(t,a){var e=r.y(this);return"#"+w[e.datum()].color}))})).attr("opacity",0).attr("transform","translate("+h+","+p+")").each((function(t,a){var e=r.y(this).selectAll("path"),i=x.map((function(a){return t[a]})),o=v(i),s=(i.sum(!0),0),c=0,l=(o.length,0),u=r.b(),d=_(t.ts),h=d.getHours(),p=d.getMinutes(),f=j(60*h+p);e.each((function(){c=o[l]/100*V(t.combined),r.y(this).attr("d",u.startAngle((function(){return y(f)})).endAngle((function(){return y(f+n)})).outerRadius((function(){return c+s})).innerRadius((function(){return s}))),s+=c,l++}))})).transition().duration(500).delay((function(t,e){return 25*(a.length-e)})).attr("opacity",(function(t,a){return K(a)})).attr("transform","translate("+h+","+p+")"),o.exit().remove(),(i=a[a.length-1])&&at(i)})),this.destroy=function(){clearInterval(R)}}},84:function(t,a,e){"use strict";var r=e(16);e.n(r).a},85:function(t,a,e){(t.exports=e(7)(!1)).push([t.i,".time-chart {\n  pointer-events: initial;\n}",""])},86:function(t,a,e){"use strict";var r=e(17);e.n(r).a},87:function(t,a,e){(t.exports=e(7)(!1)).push([t.i,"#cost-analysis-btn[data-v-047172b9] {\n  margin-left: 12px;\n}",""])}}]);