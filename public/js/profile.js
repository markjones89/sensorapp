(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{10:function(t,o,n){var e=n(31);"string"==typeof e&&(e=[[t.i,e,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(9)(e,i);e.locals&&(t.exports=e.locals)},30:function(t,o,n){"use strict";var e=n(10);n.n(e).a},31:function(t,o,n){(t.exports=n(8)(!1)).push([t.i,".user-photo[data-v-5c29639d] {\n  position: relative;\n  display: inline-flex;\n  border-radius: 50%;\n  overflow: hidden;\n}\n.user-photo img[data-v-5c29639d] {\n  height: 200px;\n  width: 200px;\n}\n.user-photo .photo-opt[data-v-5c29639d] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  visibility: hidden;\n  opacity: 0;\n  transform: scale(1.2);\n  background-color: rgba(43, 43, 43, 0.9);\n  transition: visibility 0.24s, opacity 0.24s, transform 0.24s;\n}\n.user-photo:hover .photo-opt[data-v-5c29639d] {\n  visibility: visible;\n  opacity: 1;\n  transform: scale(1);\n}\n.cropper-wrapper[data-v-5c29639d] {\n  position: relative;\n  min-height: 250px;\n  min-width: 400px;\n}\n.cropper-wrapper .cropper-opt[data-v-5c29639d] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  border: 1px dashed rgba(255, 255, 255, 0.1);\n  cursor: pointer;\n  border-radius: 10px;\n}\n#select-btn[data-v-5c29639d] {\n  float: left;\n  margin-top: 24px;\n}\n#upload-btn[data-v-5c29639d] {\n  margin-top: 24px;\n}",""])},85:function(t,o,n){"use strict";n.r(o);var e=n(5),i=n(3),a=n(2),s=n(27),r={title:"Profile",components:{Cropper:s.a,Modal:a.d},data:function(){return{user:null,photo:null,selected_photo:null,showUpload:!1,state:{uploading:!1}}},computed:{baseUrl:function(){return Object(i.b)()},photoUrl:function(){return this.user&&this.user.photo?"".concat(this.baseUrl,"/storage/user-photos/").concat(this.user.photo):"".concat(this.baseUrl,"/images/user0001.jpg")}},methods:{imageCropped:function(t){var o=t.canvas;this.photo=o},toggleUpPhoto:function(t){this.showUpload=t,t&&(this.selected_photo=null)},upPhoto:function(){this.$refs.photoFile.click()},photoFileChange:function(){var t=this,o=t.$refs.photoFile.files[0];if(o){var n=new FileReader;n.onload=function(o){t.selected_photo=o.target.result},n.readAsDataURL(o)}},uploadPhoto:function(){var t=this;t.photo.toBlob((function(o){var n=new window.FormData;n.append("photo",o),t.state.uploading=!0,axios.post("".concat("/api/users","/photo/").concat(t.user.hid),n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(o){t.state.uploading=!1;var n=o.data;n.r&&(e.a.setUserPhoto(n.photo),t.toggleUpPhoto(!1))}))}),"image/jpeg")}},mounted:function(){this.user=e.a.getUser()}},p=(n(30),n(1)),c=Object(p.a)(r,(function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("div",{staticClass:"content"},[n("h1",[t._v("Profile")]),t._v(" "),n("div",{staticClass:"user-photo"},[n("img",{attrs:{src:t.photoUrl}}),t._v(" "),n("div",{staticClass:"photo-opt",on:{click:function(o){return t.toggleUpPhoto(!0)}}},[t._v("Change")]),t._v(" "),n("input",{ref:"photoFile",attrs:{type:"file",hidden:"",accept:"image/*"},on:{change:t.photoFileChange}})]),t._v(" "),n("modal",{attrs:{show:t.showUpload},on:{close:function(o){return t.toggleUpPhoto(!1)}},scopedSlots:t._u([{key:"header",fn:function(){return[n("h2",[t._v("Change Photo")])]},proxy:!0},{key:"footer",fn:function(){return[t.selected_photo?n("button",{staticClass:"btn",attrs:{id:"select-btn"},on:{click:t.upPhoto}},[t._v("Choose file")]):t._e(),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{disabled:t.state.uploading,id:"upload-btn"},on:{click:t.uploadPhoto}},[t._v(t._s(t.state.uploading?"Uploading...":"Upload"))])]},proxy:!0}])},[t._v(" "),n("div",{staticClass:"cropper-wrapper"},[t.selected_photo?t._e():n("div",{staticClass:"cropper-opt",on:{click:t.upPhoto}},[t._v("\n                Choose file...\n            ")]),t._v(" "),n("cropper",{attrs:{classname:"cropper","stencil-component":"circle-stencil",src:t.selected_photo,"stencil-props":{aspectRatio:1}},on:{change:t.imageCropped}})],1)])],1)}),[],!1,null,"5c29639d",null);o.default=c.exports}}]);