(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{13:function(t,e,n){var s=n(37);"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(8)(s,r);s.locals&&(t.exports=s.locals)},36:function(t,e,n){"use strict";var s=n(13);n.n(s).a},37:function(t,e,n){(t.exports=n(7)(!1)).push([t.i,".settings-section[data-v-70de4bbd] {\n  margin: 24px 0;\n}\n.settings-section .days-list[data-v-70de4bbd] {\n  padding: 10px 0;\n}\n.settings-section .days-list .checkbox[data-v-70de4bbd] {\n  display: block;\n}\n.settings-section .days-list .checkbox + .checkbox[data-v-70de4bbd] {\n  margin-top: 8px;\n}\n.settings-section.hours-section[data-v-70de4bbd] {\n  margin-bottom: 32px;\n}",""])},85:function(t,e,n){"use strict";n.r(e);var s=n(0),r=n.n(s),a=n(6),i=n(2);function o(t,e,n,s,r,a,i){try{var o=t[a](i),c=o.value}catch(t){return void n(t)}o.done?e(c):Promise.resolve(c).then(s,r)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(s,r){var a=t.apply(e,n);function i(t){o(a,s,r,i,c,"next",t)}function c(t){o(a,s,r,i,c,"throw",t)}i(void 0)}))}}var d="/api/work-configs",u=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],y={components:{Loader:i.b,TimeSlider:i.e},data:function(){return{loaded:!1,user:null,settings:null,entry:{start_time:null,end_time:null,work_days:[]},state:{saving:!1}}},computed:{daysArr:function(){return u.map((function(t){return{name:t,short:t.substr(0,3)}}))}},methods:{timeFromChange:function(t){this.entry.start_time=t},timeToChange:function(t){this.entry.end_time=t},toggleSaving:function(t){this.state.saving=t},getSettings:function(){var t=this;return c(r.a.mark((function e(){var n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get(d,{params:{cid:t.user.cid}});case 2:n=e.sent,s=n.data,t.settings=s.ws,t.loaded=!0,t.settings?(t.entry.start_time=s.ws.start_time,t.entry.end_time=s.ws.end_time,t.entry.work_days=s.ws.work_days.split(",")):t.entry.work_days=u.map((function(t){return t.substr(0,3)}));case 7:case"end":return e.stop()}}),e)})))()},triggerSave:function(){this.settings?this.upSettings():this.addSettings()},addSettings:function(){var t=this;return c(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toggleSaving(!0),axios.post(d,{company:t.user.cid,start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(e){t.toggleSaving(!1);e.data}));case 2:case"end":return e.stop()}}),e)})))()},upSettings:function(){var t=this;return c(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toggleSaving(!0),axios.put("".concat(d,"/").concat(t.settings.hid),{start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(e){t.toggleSaving(!1);e.data}));case 2:case"end":return e.stop()}}),e)})))()}},created:function(){this.user=a.a.getUser()},mounted:function(){this.getSettings()}},l=(n(36),n(1)),v=Object(l.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("h1",[t._v("Work Settings")]),t._v(" "),n("transition",{attrs:{name:"fadeUp"}},[t.loaded?n("div",{attrs:{id:"settings-panel"}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("div",{staticClass:"settings-section"},[n("h2",[t._v("Working Days")]),t._v(" "),n("div",{staticClass:"days-list"},t._l(t.daysArr,(function(e){return n("span",{key:e.short,staticClass:"checkbox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.work_days,expression:"entry.work_days"}],attrs:{type:"checkbox",id:"cb"+e.short},domProps:{value:e.short,checked:Array.isArray(t.entry.work_days)?t._i(t.entry.work_days,e.short)>-1:t.entry.work_days},on:{change:function(n){var s=t.entry.work_days,r=n.target,a=!!r.checked;if(Array.isArray(s)){var i=e.short,o=t._i(s,i);r.checked?o<0&&t.$set(t.entry,"work_days",s.concat([i])):o>-1&&t.$set(t.entry,"work_days",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.entry,"work_days",a)}}}),t._v(" "),n("label",{attrs:{for:"cb"+e.short}},[t._v(t._s(e.name))])])})),0)])]),t._v(" "),n("div",{staticClass:"col"},[n("div",{staticClass:"settings-section hours-section"},[n("h2",[t._v("Working Hours")]),t._v(" "),n("time-slider",{attrs:{from:t.entry.start_time,to:t.entry.end_time},on:{startChanged:t.timeFromChange,endChanged:t.timeToChange}})],1)])]),t._v(" "),n("button",{staticClass:"btn btn-primary",on:{click:t.triggerSave}},[t._v("Save Settings")])]):t._e()]),t._v(" "),n("loader",{attrs:{show:!t.loaded,type:"ripple"}})],1)}),[],!1,null,"70de4bbd",null);e.default=v.exports}}]);