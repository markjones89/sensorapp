(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{15:function(t,n,e){var o=e(41);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};e(9)(o,a);o.locals&&(t.exports=o.locals)},40:function(t,n,e){"use strict";var o=e(15);e.n(o).a},41:function(t,n,e){(t.exports=e(8)(!1)).push([t.i,".company-logo[data-v-096ef674] {\n  display: inline-flex;\n  margin-top: 16px;\n}\n.company-logo .logo-holder[data-v-096ef674] {\n  position: relative;\n  height: 48px;\n  width: 150px;\n  padding: 10px;\n  border-radius: 10px;\n  overflow: hidden;\n}\n.company-logo .logo-holder .upload-trigger[data-v-096ef674] {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: calc(100% - 2px);\n  font-size: 14px;\n  cursor: pointer;\n  border-radius: 10px;\n  border: 1px dashed rgba(255, 255, 255, 0.1);\n}\n.company-logo .logo-holder .upload-progress[data-v-096ef674] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: #2B2B2B;\n}\n.company-logo .logo-holder img[data-v-096ef674] {\n  height: 100%;\n  width: auto;\n}\n.company-logo .logo-holder .logo-opt[data-v-096ef674] {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  visibility: hidden;\n  opacity: 0;\n  transform: scale(1.25);\n  background-color: rgba(57, 57, 57, 0.8);\n  transition: visibility 0.24s, opacity 0.24s, transform 0.24s;\n}\n.company-logo .logo-holder:hover .logo-opt[data-v-096ef674] {\n  visibility: visible;\n  opacity: 1;\n  transform: scale(1);\n}\n.settings-section[data-v-096ef674] {\n  margin: 24px 0;\n}\n.settings-section .days-list[data-v-096ef674] {\n  padding: 10px 0;\n}\n.settings-section .days-list .checkbox[data-v-096ef674] {\n  display: block;\n}\n.settings-section .days-list .checkbox + .checkbox[data-v-096ef674] {\n  margin-top: 8px;\n}\n.settings-section.hours-section[data-v-096ef674] {\n  margin-bottom: 32px;\n}",""])},89:function(t,n,e){"use strict";e.r(n);var o=e(0),a=e.n(o),s=e(5),r=e(3),i=e(2);function c(t,n,e,o,a,s,r){try{var i=t[s](r),c=i.value}catch(t){return void e(t)}i.done?n(c):Promise.resolve(c).then(o,a)}function d(t){return function(){var n=this,e=arguments;return new Promise((function(o,a){var s=t.apply(n,e);function r(t){c(s,o,a,r,i,"next",t)}function i(t){c(s,o,a,r,i,"throw",t)}r(void 0)}))}}var l="/api/work-configs",u=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],g={components:{CircleProgress:i.a,Loader:i.b,TimeSlider:i.e},data:function(){return{loaded:!1,user:null,settings:null,entry:{start_time:null,end_time:null,work_days:[]},upload_info:{uploading:!1,progress:0},state:{saving:!1}}},computed:{baseUrl:function(){return Object(r.b)()},daysArr:function(){return u.map((function(t){return{name:t,short:t.substr(0,3)}}))}},methods:{timeFromChange:function(t){this.entry.start_time=t},timeToChange:function(t){this.entry.end_time=t},toggleSaving:function(t){this.state.saving=t},getSettings:function(){var t=this;return d(a.a.mark((function n(){var e,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get(l,{params:{cid:t.user.cid}});case 2:e=n.sent,o=e.data,t.settings=o.ws,t.loaded=!0,t.settings?(t.entry.start_time=o.ws.start_time,t.entry.end_time=o.ws.end_time,t.entry.work_days=o.ws.work_days.split(",")):t.entry.work_days=u.map((function(t){return t.substr(0,3)}));case 7:case"end":return n.stop()}}),n)})))()},triggerSave:function(){this.settings?this.upSettings():this.addSettings()},addSettings:function(){var t=this;return d(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.post(l,{company:t.user.cid,start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(n){t.toggleSaving(!1);n.data}));case 2:case"end":return n.stop()}}),n)})))()},upSettings:function(){var t=this;return d(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.put("".concat(l,"/").concat(t.settings.hid),{start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(n){t.toggleSaving(!1);n.data}));case 2:case"end":return n.stop()}}),n)})))()},upLogo:function(){this.$refs.logoFile.click()},logoFileChange:function(){var t=this,n=t.$refs.logoFile.files[0];n&&(t.upload_info.uploading=!0,t.uploadLogo(n,(function(n,e){t.upload_info.uploading=!1,n?e.r&&s.a.setCompanyLogo(e.logo):console.error(e)})))},uploadLogo:function(t,n){var e=this;return d(a.a.mark((function o(){var s,r;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:s=e,(r=new window.FormData).append("logo",t),r.append("id",e.user.company.hid),axios.post("/api/clients/logo",r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(t){var n=Math.round(100*t.loaded/t.total);s.upload_info.progress=n}}).then((function(t){return n(!0,t.data)})).catch((function(t){return n(!1,t)}));case 4:case"end":return o.stop()}}),o)})))()}},created:function(){this.user=s.a.getUser()},mounted:function(){this.getSettings()}},p=(e(40),e(1)),y=Object(p.a)(g,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content"},[e("h1",[t._v("Work Settings")]),t._v(" "),e("transition",{attrs:{name:"fadeUp"}},[t.loaded?e("div",{attrs:{id:"settings-panel"}},[e("div",{staticClass:"settings-section",attrs:{id:"company-settings"}},[e("h2",[t._v("Company Logo")]),t._v(" "),e("div",{staticClass:"company-logo"},[e("div",{staticClass:"logo-holder"},[t.upload_info.uploading?e("div",{staticClass:"upload-progress"},[e("circle-progress",{attrs:{percent:t.upload_info.progress}})],1):t._e(),t._v(" "),t.user.company.logo?e("img",{attrs:{src:t.baseUrl+"/storage/logos/"+t.user.company.logo}}):e("div",{staticClass:"upload-trigger",on:{click:t.upLogo}},[t._v("\n                            Add Logo\n                        ")]),t._v(" "),t.user.company.logo?e("div",{staticClass:"logo-opt",on:{click:t.upLogo}},[t._v("Change")]):t._e()])]),t._v(" "),e("input",{ref:"logoFile",attrs:{type:"file",hidden:"",accept:"image/*"},on:{change:t.logoFileChange}})]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"settings-section"},[e("h2",[t._v("Working Days")]),t._v(" "),e("div",{staticClass:"days-list"},t._l(t.daysArr,(function(n){return e("span",{key:n.short,staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.work_days,expression:"entry.work_days"}],attrs:{type:"checkbox",id:"cb"+n.short},domProps:{value:n.short,checked:Array.isArray(t.entry.work_days)?t._i(t.entry.work_days,n.short)>-1:t.entry.work_days},on:{change:function(e){var o=t.entry.work_days,a=e.target,s=!!a.checked;if(Array.isArray(o)){var r=n.short,i=t._i(o,r);a.checked?i<0&&t.$set(t.entry,"work_days",o.concat([r])):i>-1&&t.$set(t.entry,"work_days",o.slice(0,i).concat(o.slice(i+1)))}else t.$set(t.entry,"work_days",s)}}}),t._v(" "),e("label",{attrs:{for:"cb"+n.short}},[t._v(t._s(n.name))])])})),0)])]),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"settings-section hours-section"},[e("h2",[t._v("Working Hours")]),t._v(" "),e("time-slider",{attrs:{from:t.entry.start_time,to:t.entry.end_time},on:{startChanged:t.timeFromChange,endChanged:t.timeToChange}})],1)])]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:t.triggerSave}},[t._v("Save Settings")])]):t._e()]),t._v(" "),e("loader",{attrs:{show:!t.loaded,type:"ripple"}})],1)}),[],!1,null,"096ef674",null);n.default=y.exports}}]);