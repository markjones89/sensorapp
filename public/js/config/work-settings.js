(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{13:function(t,n,e){var s=e(37);"string"==typeof s&&(s=[[t.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};e(8)(s,r);s.locals&&(t.exports=s.locals)},36:function(t,n,e){"use strict";var s=e(13);e.n(s).a},37:function(t,n,e){(t.exports=e(7)(!1)).push([t.i,".settings-section[data-v-70de4bbd] {\n  margin: 24px 0;\n}\n.settings-section .days-list[data-v-70de4bbd] {\n  padding: 10px 0;\n}\n.settings-section .days-list .checkbox[data-v-70de4bbd] {\n  display: block;\n}\n.settings-section .days-list .checkbox + .checkbox[data-v-70de4bbd] {\n  margin-top: 8px;\n}\n.settings-section.hours-section[data-v-70de4bbd] {\n  margin-bottom: 32px;\n}",""])},84:function(t,n,e){"use strict";e.r(n);var s=e(0),r=e.n(s),a=e(6),i=e(2);function o(t,n,e,s,r,a,i){try{var o=t[a](i),d=o.value}catch(t){return void e(t)}o.done?n(d):Promise.resolve(d).then(s,r)}function d(t){return function(){var n=this,e=arguments;return new Promise((function(s,r){var a=t.apply(n,e);function i(t){o(a,s,r,i,d,"next",t)}function d(t){o(a,s,r,i,d,"throw",t)}i(void 0)}))}}var c="/api/work-configs",u=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],y={components:{Loader:i.a,TimeSlider:i.d},data:function(){return{loaded:!1,user:null,settings:null,entry:{start_time:null,end_time:null,work_days:[]},state:{saving:!1}}},computed:{daysArr:function(){return u.map((function(t){return{name:t,short:t.substr(0,3)}}))}},methods:{timeFromChange:function(t){this.entry.start_time=t},timeToChange:function(t){this.entry.end_time=t},toggleSaving:function(t){this.state.saving=t},getSettings:function(){var t=this;return d(r.a.mark((function n(){var e,s;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,axios.get(c,{params:{cid:t.user.cid}});case 2:e=n.sent,s=e.data,t.settings=s.ws,t.loaded=!0,t.settings?(t.entry.start_time=s.ws.start_time,t.entry.end_time=s.ws.end_time,t.entry.work_days=s.ws.work_days.split(",")):t.entry.work_days=u.map((function(t){return t.substr(0,3)}));case 7:case"end":return n.stop()}}),n)})))()},triggerSave:function(){this.settings?this.upSettings():this.addSettings()},addSettings:function(){var t=this;return d(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.post(c,{company:t.user.cid,start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(n){t.toggleSaving(!1);n.data}));case 2:case"end":return n.stop()}}),n)})))()},upSettings:function(){var t=this;return d(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.toggleSaving(!0),axios.put("".concat(c,"/").concat(t.settings.hid),{start_time:t.entry.start_time,end_time:t.entry.end_time,work_days:t.entry.work_days.join(",")}).then((function(n){t.toggleSaving(!1);n.data}));case 2:case"end":return n.stop()}}),n)})))()}},created:function(){this.user=a.a.getUser()},mounted:function(){this.getSettings()}},l=(e(36),e(1)),v=Object(l.a)(y,(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"content"},[e("h1",[t._v("Work Settings")]),t._v(" "),e("transition",{attrs:{name:"fadeUp"}},[t.loaded?e("div",{attrs:{id:"settings-panel"}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("div",{staticClass:"settings-section"},[e("h2",[t._v("Working Days")]),t._v(" "),e("div",{staticClass:"days-list"},t._l(t.daysArr,(function(n){return e("span",{key:n.short,staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.entry.work_days,expression:"entry.work_days"}],attrs:{type:"checkbox",id:"cb"+n.short},domProps:{value:n.short,checked:Array.isArray(t.entry.work_days)?t._i(t.entry.work_days,n.short)>-1:t.entry.work_days},on:{change:function(e){var s=t.entry.work_days,r=e.target,a=!!r.checked;if(Array.isArray(s)){var i=n.short,o=t._i(s,i);r.checked?o<0&&t.$set(t.entry,"work_days",s.concat([i])):o>-1&&t.$set(t.entry,"work_days",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(t.entry,"work_days",a)}}}),t._v(" "),e("label",{attrs:{for:"cb"+n.short}},[t._v(t._s(n.name))])])})),0)])]),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"settings-section hours-section"},[e("h2",[t._v("Working Hours")]),t._v(" "),e("time-slider",{attrs:{from:t.entry.start_time,to:t.entry.end_time},on:{startChanged:t.timeFromChange,endChanged:t.timeToChange}})],1)])]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:t.triggerSave}},[t._v("Save Settings")])]):t._e()]),t._v(" "),e("loader",{attrs:{show:!t.loaded,type:"ripple"}})],1)}),[],!1,null,"70de4bbd",null);n.default=v.exports}}]);